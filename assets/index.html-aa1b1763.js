import{_ as l,V as d,n as c,p as u,q as n,J as i,C as t,A as a,a5 as r}from"./framework-2a53fa2c.js";const p={},m={class:"table-of-contents"};function h(v,e){const o=d("router-link"),s=d("RouterLink");return c(),u("div",null,[e[31]||(e[31]=n("h1",{id:"generic-panels-and-no-panel-installation-and-integration",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#generic-panels-and-no-panel-installation-and-integration","aria-hidden":"true"},"#"),i(" Generic panels and no-panel installation and integration")],-1)),n("nav",m,[n("ul",null,[n("li",null,[t(o,{to:"#introduction"},{default:a(()=>e[0]||(e[0]=[i("Introduction")])),_:1})]),n("li",null,[t(o,{to:"#_1-install-and-configure-the-prerequisites"},{default:a(()=>e[1]||(e[1]=[i("1. Install and configure the prerequisites")])),_:1})]),n("li",null,[t(o,{to:"#_2-download-and-edit-integration-conf-file-to-set-required-integrations"},{default:a(()=>e[2]||(e[2]=[i("2. Download and edit integration.conf file to set required integrations")])),_:1})]),n("li",null,[t(o,{to:"#_3-install-imunify360"},{default:a(()=>e[3]||(e[3]=[i("3. Install Imunify360")])),_:1})]),n("li",null,[t(o,{to:"#_4-set-up-modules-and-integrations-and-change-other-imunify360-settings-to-reflect-your-needs"},{default:a(()=>e[4]||(e[4]=[i("4. Set up modules and integrations and change other Imunify360 settings to reflect your needs")])),_:1})])])]),e[32]||(e[32]=n("h2",{id:"introduction",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#introduction","aria-hidden":"true"},"#"),i(" Introduction")],-1)),e[33]||(e[33]=n("p",null,"Imunify360 can be installed directly on the server, independent of any panel, regardless of the administrative interface. It is also called stand-alone, non-panel, generic panel integration.",-1)),e[34]||(e[34]=n("h4",{id:"limitations",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#limitations","aria-hidden":"true"},"#"),i(" Limitations")],-1)),n("ul",null,[n("li",null,[e[6]||(e[6]=i("No support for managing disabled rules yet. See also: ")),t(s,{to:"/dashboard/#disabled-rules"},{default:a(()=>e[5]||(e[5]=[i("Disabled rules")])),_:1})])]),e[35]||(e[35]=n("h4",{id:"requirements",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#requirements","aria-hidden":"true"},"#"),i(" Requirements")],-1)),e[36]||(e[36]=n("p",null,[n("strong",null,"Supported Operating Systems")],-1)),n("ul",null,[n("li",null,[e[8]||(e[8]=i("The same list as ")),t(s,{to:"/installation/#requirements"},{default:a(()=>e[7]||(e[7]=[i("here")])),_:1}),e[9]||(e[9]=i("."))])]),e[37]||(e[37]=n("p",null,[n("strong",null,"Web Servers")],-1)),e[38]||(e[38]=n("ul",null,[n("li",null,"Apache >= 2.4.30"),n("li",null,"LiteSpeed"),n("li",null,"Nginx")],-1)),e[39]||(e[39]=n("h4",{id:"there-are-four-main-steps-in-general-required-for-having-imunify360-stand-alone-running-on-your-server",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#there-are-four-main-steps-in-general-required-for-having-imunify360-stand-alone-running-on-your-server","aria-hidden":"true"},"#"),i(" There are four main steps in general required for having Imunify360 Stand-alone running on your server:")],-1)),n("ol",null,[n("li",null,[e[11]||(e[11]=i("Install and configure the ")),t(s,{to:"/control_panel_integration/#prerequisites"},{default:a(()=>e[10]||(e[10]=[i("prerequisites")])),_:1}),e[12]||(e[12]=i(" such as ModSecurity, PHP with JSON support, and other common WEB server packages."))]),e[13]||(e[13]=n("li",null,[i("Download and edit "),n("a",{href:"https://raw.githubusercontent.com/cloudlinux/imunify360-documentation/master/docs/control_panel_integration/integration.conf",target:"_blank",rel:"noopener noreferrer"},"integration.conf"),i(" file to configure Imunify360 required integrations BEFORE running the installation script.")],-1)),e[14]||(e[14]=n("li",null,[i("Install Imunify360 using the "),n("a",{href:"https://repo.imunify360.cloudlinux.com/defence360/i360deploy.sh",target:"_blank",rel:"noopener noreferrer"},"deploy script")],-1)),e[15]||(e[15]=n("li",null,[i("Check the "),n("a",{href:"https://docs.imunify360.com/faq_and_known_issues/#_15-how-to-check-modsecurity-scan-works",target:"_blank",rel:"noopener noreferrer"},"installed modules work"),i(" and change the Imunify360 settings to reflect your needs.")],-1))]),e[40]||(e[40]=r(`<div class="warning custom-block"><p class="custom-block-title">CageFS Warning</p><p>If Imunify360 runs in CageFS, you&#39;ll need to configure it accordingly. It is required to make sure Imunify Web-UI PHP code can be executed under a non-root user and grant access to <code>/var/run/defence360agent/non_root_simple_rpc.sock</code>.</p><p>To allow non-root user in CageFS access to the socket, this workaround should be applied:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code># Ensure the existence of the related cagefs directory for the user
# and write necessary configuration for setting up virtual mp.
# For more information, see docs:
# https://docs.cloudlinux.com/shared/cloudlinux_os_components/#per-user-virtual-mount-points
#
export prefix=$(id -u {{ imunify_ui_user }} | tail -c 3)
export cagefs_namespace_dir=/var/cagefs/\${prefix}/{{ imunify_ui_user }}/
mkdir -p \${cagefs_namespace_dir}
#
# The lines starting with @ mean they are subdirectories.
# If we do not wanna mask everything else in /var/run,
# we should not omit that line but make it an empty subdir under defence360agent, like shown
#
cat &lt;&lt; EOF &gt; \${cagefs_namespace_dir}/virt.mp
/var/run/defence360agent
@
EOF
cagefsctl --remount-all
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><h2 id="_1-install-and-configure-the-prerequisites" tabindex="-1"><a class="header-anchor" href="#_1-install-and-configure-the-prerequisites" aria-hidden="true">#</a> 1. Install and configure the prerequisites</h2><p>Imunify360 Stand-alone version requires the following components installed or enabled at the server:</p><ul><li><strong>ModSecurity 2.9.x</strong> for Apache or <strong>ModSecurity 3.0.x</strong> for Nginx</li><li>Apache module <span class="notranslate"><code>mod_remoteip</code></span> or nginx module <span class="notranslate"><code>ngx_http_realip_module</code></span></li><li>PHP with <span class="notranslate"><code>json</code></span> extension loaded and <span class="notranslate"><code>proc_open</code></span> function enabled (remove it from the <span class="notranslate"><code>disable_functions</code></span> list in <span class="notranslate"><code>php.ini</code></span>)</li></ul><div class="warning custom-block"><p class="custom-block-title">Warning</p><p>We recommend using the stable versions of ModSecurity3 (i.e. 3.0.4), because developing versions (i.e. master) can have stability issues (see <a href="https://github.com/SpiderLabs/ModSecurity/issues/2381" target="_blank" rel="noopener noreferrer">https://github.com/SpiderLabs/ModSecurity/issues/2381</a> for example).</p></div><h2 id="_2-download-and-edit-integration-conf-file-to-set-required-integrations" tabindex="-1"><a class="header-anchor" href="#_2-download-and-edit-integration-conf-file-to-set-required-integrations" aria-hidden="true">#</a> 2. Download and edit integration.conf file to set required integrations</h2><p>The Imunify360 Stand-alone version requires the following integrations before installation:</p><ul><li>2.1 Specifying panel information</li><li>2.2 Integration with WEB server for serving UI</li><li>2.3 Interaction with ModSecurity</li><li>2.4 Integration with Authentication Service</li><li>2.5 Integration with Malware Scanner</li></ul>`,8)),n("p",null,[e[17]||(e[17]=i("All integrations set in the integration config file like ")),e[18]||(e[18]=n("span",{class:"notranslate"},[n("code",null,"/etc/sysconfig/imunify360/integration.conf")],-1)),e[19]||(e[19]=i(". You can find more details on the config file ")),t(s,{to:"/control_panel_integration/#integration-config-file"},{default:a(()=>e[16]||(e[16]=[i("here")])),_:1}),e[20]||(e[20]=i(", get a ")),e[21]||(e[21]=n("a",{href:"https://github.com/cloudlinux/imunify360-documentation/blob/master/docs/control_panel_integration/integration.conf",target:"_blank",rel:"noopener noreferrer"},"template",-1)),e[22]||(e[22]=i(" or check the ")),e[23]||(e[23]=n("a",{href:"https://cloudlinux.zendesk.com/hc/en-us/articles/4716287786396",target:"_blank",rel:"noopener noreferrer"},"Knoledgebase article",-1)),e[24]||(e[24]=i("."))]),e[41]||(e[41]=r(`<h4 id="_2-1-specifying-panel-information" tabindex="-1"><a class="header-anchor" href="#_2-1-specifying-panel-information" aria-hidden="true">#</a> 2.1 Specifying panel information</h4><p>To specify information about your hosting panel in Imunify360/ImunifyAV, use the <code>panel_info</code> option in the <code>[integration_scripts]</code> section of <code>integration.conf</code> file.</p><div class="warning custom-block"><p class="custom-block-title"></p><p>This is a mandatory field and must be specified prior to the start of the installation.</p></div><div class="notranslate"><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>[integration_scripts]
panel_info = /etc/sysconfig/imunify360/get-panel-info.sh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><p>The option should contain a full path to the executable that prints JSON data in the following format:</p><div class="notranslate"><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>{
    &quot;data&quot;: {
        &quot;name&quot;: &quot;MyHostingPanel&quot;,
        &quot;version&quot;: &quot;1.23.4&quot;
    },
    &quot;metadata&quot;: {
        &quot;result&quot;: &quot;ok&quot;
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>The script can echo or print this information in JSON format, or you could configure the file in order to receive the actual information about the hosting panel in use. In case you don’t have a hosting panel at all, use the following stub file: <a href="https://github.com/cloudlinux/imunify360-documentation/blob/master/docs/control_panel_integration/get-panel-info.sh" target="_blank" rel="noopener noreferrer">get-panel-info.sh</a></p><h4 id="_2-2-integration-with-web-server-for-serving-ui" tabindex="-1"><a class="header-anchor" href="#_2-2-integration-with-web-server-for-serving-ui" aria-hidden="true">#</a> 2.2 Integration with web server for serving UI</h4><p>Imunify360 UI is implemented as a single-page application (SPA) and requires a web server to serve it. It’s required to specify a path to the web server directory, where the Imunify360 UI SPA application will be installed and served.</p><p><strong>Example:</strong></p><div class="notranslate"><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>[paths]
ui_path = /var/www/vhosts/imunify360/imunify360.hosting.example.com/html/im360
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><p>Ensure that the domain you are going to use for the Imunify360 web-based UI refers to this path and that there are no other scripts or files under <span class="notranslate"><code>ui_path</code></span>, to avoid overwriting the files Imunify360 installation will abort.</p><h4 id="_2-3-web-engine-and-interaction-with-modsecurity" tabindex="-1"><a class="header-anchor" href="#_2-3-web-engine-and-interaction-with-modsecurity" aria-hidden="true">#</a> 2.3 Web engine and Interaction with ModSecurity</h4><p>It is required to set the web server graceful restart script ang paths in the <span class="notranslate"><code>integration.conf</code></span></p><ul><li><span class="notranslate"><code>graceful_restart_script</code></span> – a script that restarts the web server to be called after any changes in web server config or ModSecurity rules</li><li><span class="notranslate"><code>config_test_script</code></span> – a script that checks the web server&#39;s config to be called after any changes in the web server config or ModSecurity rules (optional)</li><li><span class="notranslate"><code>modsec_audit_log</code></span> – a path to ModSecurity audit log file</li><li><span class="notranslate"><code>modsec_audit_logdir</code></span> – a path to ModSecurity audit log directory (only required when the <span class="notranslate"><code>SecAuditLogType</code></span> set to the <span class="notranslate"><code>Concurrent</code></span>)</li></ul><p><strong>Example:</strong></p><div class="notranslate"><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>[web_server]
server_type = apache
graceful_restart_script = /usr/sbin/apachectl restart
config_test_script = /usr/sbin/apachectl -t
modsec_audit_log = /var/log/httpd/modsec_audit.log
modsec_audit_logdir = /var/log/modsec_audit
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><h4 id="apache-and-litespeed" tabindex="-1"><a class="header-anchor" href="#apache-and-litespeed" aria-hidden="true">#</a> Apache and LiteSpeed</h4><p>Configure <a href="https://github.com/SpiderLabs/ModSecurity/wiki/Reference-Manual-%28v2.x%29#Configuration_Directives" target="_blank" rel="noopener noreferrer">ModSecurity configuration directives</a> (so that it can block):</p><div class="notranslate"><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>SecAuditEngine RelevantOnly
SecConnEngine Off
SecRuleEngine On
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>Create the empty file <span class="notranslate"><code>/etc/sysconfig/imunify360/generic/modsec.conf</code></span> and include it into the web server config as <span class="notranslate"><code>IncludeOptional</code></span>. To do this you need to find your web server config file, like <strong>/etc/httpd/conf/httpd.conf</strong> and add a line to it:</p><div class="notranslate"><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>IncludeOptional /etc/sysconfig/imunify360/generic/modsec.conf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></div><p>The file would be replaced with the actual config during the first Imunify360 installation or you can fill it via calling the Imunify360 ModSec ruleset installation <span class="notranslate"><code>imunify360-agent install-vendors</code></span>.</p><h4 id="nginx" tabindex="-1"><a class="header-anchor" href="#nginx" aria-hidden="true">#</a> Nginx</h4><div class="tip custom-block"><p class="custom-block-title">Note</p><p>ModSecurity has different syntax comparing to Nginx configuration, thus ModSecurity directives can not be directly included to the Nginx config files.</p></div><p>Create a separate file (i.e. <span class="notranslate"><code>/etc/nginx/modsec.conf</code></span>) and set the following ModSecurity directives in it:</p><div class="notranslate"><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>SecAuditEngine RelevantOnly
SecConnEngine Off
SecRuleEngine On
SecAuditLogFormat JSON
# should match modsec_audit_log option in integration.conf (see below)
SecAuditLog /var/log/nginx/modsec_audit_log
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div class="danger custom-block"><p class="custom-block-title">Warning</p><p>ModSecurity on Nginx does not properly re-opens audit log on SIGHUP/SIGUSR1, which can cause logrotate to break integration with Imunify360. See <a href="https://github.com/SpiderLabs/ModSecurity-nginx/issues/121" target="_blank" rel="noopener noreferrer">https://github.com/SpiderLabs/ModSecurity-nginx/issues/121</a> for details.</p></div><p>Create an empty file <span class="notranslate"><code>/etc/sysconfig/imunify360/generic/modsec.conf</code></span>. The file would be replaced with the actual config during the first Imunify360 installation or you can fill it via calling the Imunify360 ModSec ruleset installation <span class="notranslate"><code>imunify360-agent install-vendors</code></span>.</p><p>Then enable ModSecurity and include both files into Nginx configuration using the <span class="notranslate"><code>modsecurity_rules_file</code></span> directive:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>modsecurity on;
modsecurity_rules_file /etc/nginx/modsec.conf;
modsecurity_rules_file /etc/sysconfig/imunify360/generic/modsec.conf;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-4-integration-with-authentication-service" tabindex="-1"><a class="header-anchor" href="#_2-4-integration-with-authentication-service" aria-hidden="true">#</a> 2.4 Integration with authentication service</h4><p>Imunify360 Stand-alone version can use PAM service to authenticate users for the Imunify360 UI application.</p><p>You can specify which PAM service Imunify360 should use with the <span class="notranslate"><code>service_name</code></span> option:</p><div class="notranslate"><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>[pam]
service_name = system-auth
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div>`,35)),n("p",null,[e[26]||(e[26]=i("You can get a token which can be used for authentication using the ")),t(s,{to:"/command_line_interface/#login"},{default:a(()=>e[25]||(e[25]=[n("span",{class:"notranslate"},[n("code",null,"login")],-1),i(" command")])),_:1}),e[27]||(e[27]=i(". The administrators have full access to Imunify360 UI and its settings."))]),e[42]||(e[42]=r(`<p>By default, root is considered to be the only admin user.</p><h4 id="_2-5-integration-with-malware-scanner" tabindex="-1"><a class="header-anchor" href="#_2-5-integration-with-malware-scanner" aria-hidden="true">#</a> 2.5 Integration with Malware Scanner</h4><p>To scan files for changes (to detect malware) using inotify, configure which directories to watch and which to ignore in the <span class="notranslate"><code>integration.conf</code></span> file:</p><ul><li>configure <span class="notranslate"><code>[malware].basedir</code></span> – a root directory to watch (recursively)</li><li>configure <span class="notranslate"><code>[malware].pattern_to_watch</code></span> – only directories that match this (<a href="https://docs.python.org/3/howto/regex.html#regex-howto" target="_blank" rel="noopener noreferrer">Python</a>) regex in the basedir are actually going to be watched</li></ul><p><strong>Example:</strong></p><div class="notranslate"><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>[malware]
basedir = /home
pattern_to_watch = ^/home/.+?/(public_html|public_ftp|private_html)(/.*)?$
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><h2 id="_3-install-imunify360" tabindex="-1"><a class="header-anchor" href="#_3-install-imunify360" aria-hidden="true">#</a> 3. Install Imunify360</h2><p>3.1. <strong>Get your license key:</strong> Visit https://www.imunify360.com/. You can purchase it or get a trial key from a received email. 3.2. <strong>Log in with root privileges:</strong> Access the server where Imunify360 should be installed with root privileges. 3.3. <strong>Run the installation commands:</strong> Navigate to your home directory and execute the following commands:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>wget https://repo.imunify360.cloudlinux.com/defence360/i360deploy.sh -O i360deploy.sh
bash i360deploy.sh --key YOUR_KEY
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div>`,9)),n("p",null,[e[29]||(e[29]=i("Where YOUR_KEY is your license key. Replace YOUR_KEY with the actual key - trial or purchased one. The installation instructions are the same as for cPanel/Plesk/DirectAdmin version and can be found in the ")),t(s,{to:"/installation/#installation-instructions"},{default:a(()=>e[28]||(e[28]=[i("Imunify360 documentation")])),_:1}),e[30]||(e[30]=i("."))]),e[43]||(e[43]=r(`<p>After the successful installation, <strong>you can reach the Imunify360 UI at the URL specified by the ui_path parameter</strong> of the configuration file.</p><h2 id="_4-set-up-modules-and-integrations-and-change-other-imunify360-settings-to-reflect-your-needs" tabindex="-1"><a class="header-anchor" href="#_4-set-up-modules-and-integrations-and-change-other-imunify360-settings-to-reflect-your-needs" aria-hidden="true">#</a> 4. Set up modules and integrations and change other Imunify360 settings to reflect your needs</h2><h4 id="_4-1-define-list-of-administrators-for-imunify360" tabindex="-1"><a class="header-anchor" href="#_4-1-define-list-of-administrators-for-imunify360" aria-hidden="true">#</a> 4.1 Define list of administrators for Imunify360</h4><p>The administrators have full access to Imunify360 UI and its settings. To grant non-root users full access add more administrators by listing them in the them in the <span class="notranslate"><code>/etc/sysconfig/imunify360/auth.admin</code></span> file or specify the <a href="https://cloudlinux.zendesk.com/hc/en-us/articles/4840433434524-How-to-filter-the-number-of-users-by-using-integration-scripts?_gl=1*1dtmkmt*_up*MQ..*_ga*ODUwMjA5NDYyLjE2OTkyMTAwOTI.*_ga_1RCQ134PYC*MTY5OTIxMDA4OS4xLjAuMTY5OTIxMDA4OS4wLjAuMA..*_ga_V4QHJSZM47*MTY5OTIxMDA4OS4xLjAuMTY5OTIxMDA4OS4wLjAuMA..*_ga_8LBSSX7VQX*MTY5OTIxMDA4OS4xLjAuMTY5OTIxMDA4OS4wLjAuMA.." target="_blank" rel="noopener noreferrer">integration scripts</a> admin scetion.</p><p>Admin users will be merged from three sources:</p><ul><li>/etc/sysconfig/imunify360/auth.admin list</li><li>scripts defined in the /etc/sysconfig/imunify360/integration.conf</li><li>/opt/cpvendor/etc/integration.ini that return user lists.</li></ul><details><summary>JSON data sample admin script should return</summary><div class="notranslate"><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>[integration_scripts]
admins = /etc/sysconfig/imunify360/get-admins-script.sh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><p>It should point to an executable file that generates a JSON file similar to the following:</p><div class="notranslate"><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>{
  &quot;data&quot;: [
    {
      &quot;name&quot;: &quot;admin1&quot;,
      &quot;unix_user&quot;: &quot;admin&quot;,
      &quot;locale_code&quot;: &quot;EN_us&quot;,
      &quot;email&quot;: &quot;admin1@domain.zone&quot;,
      &quot;is_main&quot;: true
    },
	{
      &quot;name&quot;: &quot;admin2&quot;,
      &quot;unix_user&quot;: &quot;admin&quot;,
      &quot;locale_code&quot;: &quot;Ru_ru&quot;,
      &quot;email&quot;: &quot;admin2@domain.zone&quot;,
      &quot;is_main&quot;: false
    },
  ],
  &quot;metadata&quot;: {
    &quot;result&quot;: &quot;ok&quot;
  }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></details><h4 id="_4-2-ftp-uploads-scan" tabindex="-1"><a class="header-anchor" href="#_4-2-ftp-uploads-scan" aria-hidden="true">#</a> 4.2 FTP uploads scan</h4><p>To scan files uploaded via FTP, configure <a href="https://www.pureftpd.org/project/pure-ftpd/" target="_blank" rel="noopener noreferrer">PureFTPd</a>. Write in the <span class="notranslate"><code>pure-ftp.conf</code></span>:</p><div class="notranslate"><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>CallUploadScript             yes
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></div><h4 id="_4-3-per-domain-rules-constrol" tabindex="-1"><a class="header-anchor" href="#_4-3-per-domain-rules-constrol" aria-hidden="true">#</a> 4.3 Per-domain rules constrol</h4><p>To enable domain-specific ModSecurity configuration, specify the <span class="notranslate"><code>modsec_domain_config_script</code></span> in the <span class="notranslate"><code>integration.conf</code></span>.</p><div class="notranslate"><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>[integration_scripts]
modsec_domain_config_script = /path/to/inject/domain/specific/config/script.sh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><p>It should point to an executable file that accepts as an input a list of domain-specific web server settings and injects them into the server config. The standard input (stdin) is given in the <a href="http://jsonlines.org/" target="_blank" rel="noopener noreferrer">JSON Lines</a> format similar to the following:</p><div class="notranslate"><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>{&quot;user&quot;: &quot;username&quot;, &quot;domain&quot;: &quot;example.com&quot;, &quot;content&quot;: &quot;modsec config text&quot;}
{&quot;user&quot;: &quot;another&quot;, &quot;domain&quot;: &quot;another.example.com&quot;, &quot;content&quot;: &quot;...&quot;}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><p>Each line contains config for a single domain e.g., it may contain rule tags excluded for the domain. The script should also restart the web server to apply the configuration. This should be done so that the script could implement the check that web server comes up after config change, and reset configuration if it doesn&#39;t.</p><p>If configuration change failed, the script should return 1, and in the standard error stream (stderr) it should return the reason for failure. On success, the script should return 0. In a single run of the script, we might update a single domain/user, as well as multiple users (all users) on the system.</p><h4 id="_4-4-integration-with-webshield" tabindex="-1"><a class="header-anchor" href="#_4-4-integration-with-webshield" aria-hidden="true">#</a> 4.4 Integration with WebShield</h4><p>WebShield consists of four services:</p><ul><li>WebShield itself</li><li>Shared memory daemon makes it easier to deal with certain aspects of Nginx configuration without reloading</li><li>SSL-caching daemon watches changes to host SSL certificate sets (for known hosting panels only: cPanel, Plesk, DirectAdmin) and updates the WebShield SSL cache when a certificate is added, updated or removed</li><li>Sentrylogs daemon watches WebShield log files to detect errors</li></ul><p>The configuration of WebShield is done by an agent, and direct editing of WebShield configuration files is generally not recommended. This is mainly because after the next reconfiguration all custom changes would be lost. However, a host administrator is allowed to set a certificate as the default one for WebShield to return.</p><h4 id="how-to-enable-webshield-in-the-imunify360-config-file-and-start-the-service" tabindex="-1"><a class="header-anchor" href="#how-to-enable-webshield-in-the-imunify360-config-file-and-start-the-service" aria-hidden="true">#</a> How to enable WebShield in the Imunify360 config file and start the service</h4><p>When Imunify360 stand-alone is installed, WebShield is disabled by default.</p><p>You can enable it only via CLI. To do so, run the following commands:</p><ol><li><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code> imunify360-agent config update &#39;{&quot;WEBSHIELD&quot;: {&quot;enable&quot;: true, &quot;known_proxies_support&quot;: true}}&#39;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code> systemctl enable imunify360-webshield
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code> systemctl restart imunify360-webshield
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ol><h4 id="set-default-ssl-certificate-explicitly" tabindex="-1"><a class="header-anchor" href="#set-default-ssl-certificate-explicitly" aria-hidden="true">#</a> Set default SSL certificate explicitly</h4><ol><li>Place a certificate and a key into the <span class="notranslate"><code>/etc/imunify360-webshield/ssl_certs</code></span> folder</li><li>If required, in the <span class="notranslate"><code>/etc/imunify360-webshield/ssl.conf</code></span> file, change the following directives according to your changes:</li></ol><div class="notranslate"><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ssl_certificate             ssl_certs/dummy.pem;

ssl_certificate_key         ssl_certs/dummy.pem;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>If you want to provide intermediate certificates, they are to be appended to the certificate file.</p><p>These settings require WebShield to be restarted/reloaded.</p><h4 id="manage-webshield-ssl-cache-manually" tabindex="-1"><a class="header-anchor" href="#manage-webshield-ssl-cache-manually" aria-hidden="true">#</a> Manage WebShield SSL cache manually</h4><p>To manually manage the certificate cache, use the <span class="notranslate"><code>/usr/sbin/im360-ssl-cache</code></span> utility.</p><p>To add certificates to the cache, a user would run the command:</p><div class="notranslate"><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>im360-ssl-cache --add /path/to/certs.json
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></div><p>The <span class="notranslate"><code>--add</code></span> parameter accepts exactly one value. If the parameter value is not <code>-</code>, it is taken as a path to a file in JSON format with a list of certificates and private keys to be added. Otherwise, if the parameter value is <code>-</code>, data is expected to be sent in JSON format to STDIN as in the following example:</p><div class="notranslate"><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>cat certs.json | im360-ssl-cache --add -
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></div><details><summary>Format of JSON file:</summary><div class="notranslate"><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>[
  {
      &quot;domain&quot;: &quot;john.example.com&quot;,
      &quot;key&quot;: &quot;-----BEGIN PRIVATE KEY-----\\nM...O\\n-----END PRIVATE KEY-----\\n&quot;,
      &quot;certificate&quot;: &quot;-----BEGIN CERTIFICATE-----\\nMI...Y=\\n-----END CERTIFICATE-----\\n&quot;,
      &quot;chain&quot;: &quot;-----BEGIN CERTIFICATE-----\\nM...I=\\n-----END CERTIFICATE-----\\n-----BEGIN CERTIFICATE-----\\nM...U=\\n-----END CERTIFICATE-----\\n&quot;
    },
    {
      &quot;domain&quot;: &quot;bob.example.com&quot;,
      &quot;key&quot;: &quot;...&quot;,
      &quot;certificate&quot;: &quot;...&quot;,
      &quot;chain&quot;: &quot;...&quot;
    }
]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div class="tip custom-block"><p class="custom-block-title">Note</p><p>As JSON text is not allowed to have line breaks, all newline symbols must be escaped as in the example above.</p></div></details><p>To remove certificate(s) from the cache, a user is expected to run the command:</p><div class="notranslate"><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>im360-ssl-cache --remove example.org example.com …
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></div><p>The <span class="notranslate"><code>--remove</code></span> parameter expects one or more space-separated domain names, for which certificates are to be removed from the cache.</p><p>When no parameters are passed, the <span class="notranslate"><code>im360-ssl-cache</code></span> simply lists all domain names of certificates in the cache.</p><div class="warning custom-block"><p class="custom-block-title">Note</p><p>Passing certificates data in JSON format is done to put data flow in good order, to avoid excessive checks of data. No certificate checks are made.</p></div><details><summary>Non-SNI requests</summary><p>When a request without Server Name Indication (SNI) comes, WebShield has to guess what certificate from the cache to serve.</p><p>To allow WebShield to handle non-SNI requests properly, include an <code>ip</code> field in the JSON that you pass to the <span class="notranslate"><code>im360-ssl-cache</code></span>.</p><div class="notranslate"><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>[
    {
        &quot;domain&quot;: &quot;...&quot;,
        &quot;key&quot;: &quot;...&quot;,
        &quot;certificate&quot;: &quot;...&quot;,
        &quot;chain&quot;: &quot;...&quot;,
        &quot;ip&quot;: &quot;...&quot;  // NEW, optional, NOT UNIQUE
    },..
]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>WebShield will use this data to decide which certificate to serve if a request without Server Name Indication (SNI) arrives. If there are several domains with the specified IPs, WebShield will use the first one alphabetically.</p></details><h4 id="how-to-test-ssl-configuration" tabindex="-1"><a class="header-anchor" href="#how-to-test-ssl-configuration" aria-hidden="true">#</a> How to test SSL configuration</h4><p>Administrators should see a warning in Settings in UI if no certificates are added: WebShield SSL-Cache is not configured. Although, even if a certificate is added, it doesn’t guarantee that the website is working correctly. The certificate may be outdated, invalid, or not applicable to that domain name.</p><p>The worst scenario when SSL certificate is not cached or recognised by the WebShield is that the SSL certificate of the Anti-Bot Challenge page redirect will not match the initial site the user was visiting. The WebShield will serve it&#39;s default that not likely to match with the domain name, or an outdated certificate and this may not be trusted. Thus SSL certificate waning will appear.</p><p>To make sure WebShield can serve the Anti-Bot Challenge page smoothly the relevant domain name (certificates cache) should be in the output of thec cache tool, e.g.:</p><div class="notranslate"><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>im360-ssl-cache
bob.example.com
john.example.com
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div> If the domain name is presented, its certificate content with it&#39;s key should be written in cache, WebShield&#39;s pick up algorithm will find this match to serve with domain&#39;s Anti-Bot Challenge page. <p>To attest this mechanisms, it is required:</p><ol><li>While using non-whitelisted IP (ideally an another machine that is not used to login), get the Graylist verdict.</li><li>Visit the site and validate that no SSL errors occurred while Anti-Bot Challenge is shown.</li></ol><p>The first step can be achieved in various ways, the one that is also checks the ModSecurity layer is to send specific test tags, as <a href="https://docs.imunify360.com/faq_and_known_issues/#_15-how-to-check-modsecurity-scan-works" target="_blank" rel="noopener noreferrer">per link</a> describes. The approach is to send specific tags towards you site, trigger the test rule and get IP greylisted:</p><div class="notranslate"><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>for i in {1..5} ; do curl -ks https://example.com/?i360test=88ff0adf94a190b9d1311c8b50fe2891c85af732 &gt; /dev/null; echo $i; done
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></div><p>As well as without testing the ModSec layer, it is possible to add IP to the manual Greylist as per:</p><div class="notranslate"><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>imunify360-agent graylist ip add 1.1.1.3 --comment &quot;Greylisting my test IP&quot; --expiration $(($(date &quot;+%s&quot;)+3600))
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></div><p>Subsequently, the curl results should return WebShield have no errors:</p><div class="notranslate"><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>curl -iv --ssl-reqd https://example.com
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></div><h4 id="required-web-server-configuration-to-correctly-detect-client-ip-addresses-from-headers" tabindex="-1"><a class="header-anchor" href="#required-web-server-configuration-to-correctly-detect-client-ip-addresses-from-headers" aria-hidden="true">#</a> Required web server configuration to correctly detect client IP addresses from headers</h4><p>To ensure WebShield and Graylist are working correctly (e.g. a correct IP is passed to ModSecurity), the server must recognize WebShield as an internal proxy. For example, for Apache, <code>mod_remoteip</code> must be installed and configured like this:</p><div class="notranslate"><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>&lt;IfModule remoteip_module&gt;
    RemoteIPInternalProxy 127.0.0.1
    RemoteIPInternalProxy ::1
    RemoteIPHeader X-Forwarded-For
&lt;/IfModule&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>For Nginx, the <span class="notranslate"><code>ngx_http_realip_module</code></span> module should be configured in the following way:</p><div class="notranslate"><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>real_ip_header X-Forwarded-For;
set_real_ip_from 127.0.0.1;
set_real_ip_from ::1;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>WebShield passes the real client IP in the <span class="notranslate"><code>X-Forwarded-For</code></span> header.</p><div class="tip custom-block"><p class="custom-block-title">Note</p><p>In the Apache LogFormat configuration strings for correct representation of a remote host IP address it is required using:</p><div class="notranslate"><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>%a	Client IP address of the request
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></div><p>instead of</p><div class="notranslate"><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>%h	Remote hostname
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></div><p>You can find more details at <a href="http://httpd.apache.org/docs/current/mod/mod_log_config.html" target="_blank" rel="noopener noreferrer">http://httpd.apache.org/docs/current/mod/mod_log_config.html</a>.</p></div><h4 id="cloudflare-preserving-the-original-visitor-ip-addresses" tabindex="-1"><a class="header-anchor" href="#cloudflare-preserving-the-original-visitor-ip-addresses" aria-hidden="true">#</a> Cloudflare: Preserving the original visitor IP addresses</h4><div class="tip custom-block"><p class="custom-block-title"></p><p>For cases when server logs indicate IP addresses that differ from actual ones when the domain is hosted within the CloudFlare network.</p><p>Suitable for all supported control panels and OS working on Apache/Nginx.</p></div><p>When simulated IPv4 is configured to &quot;Overwrite Headers&quot; mode in Cloudflare settings, Cloudflare replaces the existing Cf-Connecting-IP and X-Forwarded-For headers with a pseudo IPv4 address. At the same time, it retains the real IPv6 address by placing it in the CF-Connecting-IPv6 header.</p><p>In a nutshell, when a website&#39;s traffic flows through the CloudFlare network, CloudFlare acts as a reverse proxy. This setup optimises page load times by efficiently routing packets and caching static resources such as images, JavaScript, and CSS. Consequently, when the origin server responds to requests and logs them, it records a CloudFlare IP address.</p><p>CloudFlare provides the original IP in an appended HTTP header named <code>CF-Connecting-IP</code> for applications that rely on the original visitor&#39;s IP address.</p><p>To log the original visitor IP address at the origin server level, the following instructions should be followed:</p><p><strong>Apache</strong></p><ol><li>We need to ensure that Apache has a <code>mod_remoteip</code> module enabled.</li></ol><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>[root@server ~]# apachectl -t -D DUMP_MODULES |grep &#39;rem&#39;
remoteip_module (shared)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>The combined <code>LogFormat</code> should be changed as follows:</li></ol><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>LogFormat &quot;%a %l %u %t \\&quot;%r\\&quot; %&gt;s %O \\&quot;%{Referer}i\\&quot; \\&quot;%{User-Agent}i\\&quot;&quot; combined
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="3"><li>At this point, defining the trust between CloudFlare and the Origin Server is crucial:</li></ol><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>RemoteIPHeader CF-Connecting-IP
RemoteIPTrustedProxy 192.0.2.1 (example IP address)
RemoteIPTrustedProxy 192.0.2.2 (example IP address)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The current IPs are:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>173.245.48.0/20
103.21.244.0/22
103.22.200.0/22
103.31.4.0/22
141.101.64.0/18
108.162.192.0/18
190.93.240.0/20
188.114.96.0/20
197.234.240.0/22
198.41.128.0/17
162.158.0.0/15
104.16.0.0/13
104.24.0.0/14
172.64.0.0/13
131.0.72.0/22

2400:cb00::/32
2606:4700::/32
2803:f800::/32
2405:b500::/32
2405:8100::/32
2a06:98c0::/29
2c0f:f248::/32
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The updated list is residing <a href="https://www.cloudflare.com/ips/" target="_blank" rel="noopener noreferrer">here</a>.</p><p><strong>Nginx</strong></p><p>For Nginx , we use its respective module called <code>ngx_http_realip_module</code>. You can check if that is enabled in the following way:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>[root@server ~]# nginx -V
nginx version: nginx/1.26.1
built with OpenSSL 1.1.1k FIPS 25 Mar 2021
TLS SNI support enabled
configure arguments: --prefix=/usr/share --sbin-path=/usr/sbin/nginx --conf-path=/etc/nginx/nginx.conf --modules-path=/usr/share/nginx/modules --error-log-path=/var/log/nginx/error.log --http-log-path=/var/log/nginx/access.log --lock-path=/var/lock/nginx.lock --pid-path=/run/nginx.pid --http-client-body-temp-path=/var/lib/nginx/body --http-fastcgi-temp-path=/var/lib/nginx/fastcgi --http-proxy-temp-path=/var/lib/nginx/proxy --http-scgi-temp-path=/var/lib/nginx/scgi --http-uwsgi-temp-path=/var/lib/nginx/uwsgi --user=nginx --group=nginx --with-file-aio --with-compat --with-ld-opt=-L/var/jenkins/workspace/PLESK/plesk-aws-bootstrap/buck-out/gen/unix/plesk/packages/brotli/brotli.files/usr/lib64 --with-http_ssl_module --with-http_realip_module --with-http_sub_module --with-http_dav_module --with-http_gzip_static_module --with-http_stub_status_module --with-http_v2_module --with-http_v3_module --add-dynamic-module=mod_brotli --add-dynamic-module=mod_passenger/src/nginx_module --add-dynamic-module=mod_pagespeed --add-dynamic-module=mod_security --add-dynamic-module=mod_geoip2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>If we get that confirmation, the steps of declaring the trust are mentioned <a href="https://nginx.org/en/docs/http/ngx_http_realip_module.html" target="_blank" rel="noopener noreferrer">here</a>.</p><p>The IPs should be set here:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>set_real_ip_from 192.0.2.1 (example IP address)
real_ip_header CF-Connecting-IP;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="use-a-specific-list-of-users-in-imunify360" tabindex="-1"><a class="header-anchor" href="#use-a-specific-list-of-users-in-imunify360" aria-hidden="true">#</a> Use a specific list of users in Imunify360</h4><p>By default, Imunify360 will use Linux system users, limited by <span class="notranslate"><code>uid_min</code></span> and <span class="notranslate"><code>uid_max</code></span> from the <span class="notranslate"><code>/etc/login.defs</code></span>.</p><h4 id="data-description" tabindex="-1"><a class="header-anchor" href="#data-description" aria-hidden="true">#</a> Data description</h4><table><thead><tr><th></th><th></th><th></th></tr></thead><tbody><tr><td>Key</td><td>Nullable</td><td>Description</td></tr><tr><td><span class="notranslate"><code>id</code></span></td><td><span class="notranslate"><code>False</code></span></td><td>ID of the UNIX account in the system.</td></tr><tr><td><span class="notranslate"><code>username</code></span></td><td><span class="notranslate"><code>False</code></span></td><td>The name of the UNIX account in the system.</td></tr><tr><td><span class="notranslate"><code>owner</code></span></td><td><span class="notranslate"><code>True</code></span></td><td>The name of the account owner. The owner can be an administrator (in this case he should be included in the <span class="notranslate"><code>admins()</code></span> output) or a reseller (in this case he should be included in the <span class="notranslate"><code>resellers()</code></span> output).</td></tr><tr><td><span class="notranslate"><code>locale_code</code></span></td><td><span class="notranslate"><code>True</code></span></td><td>The locale selected by a user.</td></tr><tr><td><span class="notranslate"><code>email</code></span></td><td><span class="notranslate"><code>True</code></span></td><td>Email of the account user. If there is no email, it should return null.</td></tr><tr><td><span class="notranslate"><code>domain</code></span></td><td><span class="notranslate"><code>True</code></span></td><td>The main domain of a user.</td></tr><tr><td><span class="notranslate"><code>package</code></span></td><td><span class="notranslate"><code>True</code></span></td><td>Information about the package to which a user belongs to. If the user doesn’t belong to any package, it should return null.</td></tr><tr><td><span class="notranslate"><code>package.name</code></span></td><td><span class="notranslate"><code>False</code></span></td><td>The name of the package to which a user belongs to.</td></tr><tr><td><span class="notranslate"><code>package.owner</code></span></td><td><span class="notranslate"><code>True</code></span></td><td>The owner of the package to which a user belongs to (reseller or administrator).</td></tr></tbody></table><div class="notranslate"><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>[integration_sctipts]
domains = /path/to/get-domains-script.sh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><p>It should point to an executable file that generates a JSON file similar to the following</p><div class="notranslate"><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>{
  &quot;data&quot;: {
    &quot;example.com&quot;: {
      &quot;document_root&quot;: &quot;/home/username/public_html/&quot;,
      &quot;is_main&quot;: true,
      &quot;owner&quot;: &quot;username&quot;
    },
    &quot;subdomain.example.com&quot;: {
      &quot;document_root&quot;: &quot;/home/username/public_html/subdomain/&quot;,
      &quot;is_main&quot;: false,
      &quot;owner&quot;: &quot;username&quot;
    }
  },
  &quot;metadata&quot;: {
    &quot;result&quot;: &quot;ok&quot;
  }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p><span class="notranslate"><code>web_server_config_path</code></span> should point to a path that is added as <span class="notranslate"><code>IncludeOptional</code></span> in this domain&#39;s virtual host e.g., <span class="notranslate"><code>/path/to/example.com/specific/config/to/include</code></span> path should be added for the <span class="notranslate"><code>example.com</code></span> domain.</p>`,94))])}const f=l(p,[["render",h],["__file","index.html.vue"]]);export{f as default};
