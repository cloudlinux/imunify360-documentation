<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.61">
    <script type="text/javascript" id="hs-script-loader" async defer src="//js.hs-scripts.com/5408110.js"></script><script>
    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-5MC2SNS');
    </script><script>
              (function() {
                // Trigger the scroll event without actually scrolling
                function triggerScrollEvent() {
                  const targetElement = window;
                  const scrollEvent = new Event('scroll', {
                    bubbles: true,
                    cancelable: true,
                  });
                  targetElement.dispatchEvent(scrollEvent);
                }
        
                // Call the triggerScrollEvent and scrollBodyDown functions after the page is fully loaded
                window.addEventListener('load', () => {
                  triggerScrollEvent();
                });
              })();
            </script><title>Email</title><meta name="description" content="">
    <link rel="preload" href="/assets/style-18743b35.css" as="style"><link rel="stylesheet" href="/assets/style-18743b35.css">
    <link rel="modulepreload" href="/assets/app-99b8f3f9.js"><link rel="modulepreload" href="/assets/framework-dd156d1c.js"><link rel="modulepreload" href="/assets/index.html-7415ef28.js"><link rel="modulepreload" href="/assets/index.html-2a40c127.js"><link rel="prefetch" href="/assets/index.html-08354517.js" as="script"><link rel="prefetch" href="/assets/index.html-f1592cd8.js" as="script"><link rel="prefetch" href="/assets/index.html-1ff1fe72.js" as="script"><link rel="prefetch" href="/assets/index.html-dec3e580.js" as="script"><link rel="prefetch" href="/assets/index.html-39a3888c.js" as="script"><link rel="prefetch" href="/assets/index.html-e985a833.js" as="script"><link rel="prefetch" href="/assets/index.html-6c0a6077.js" as="script"><link rel="prefetch" href="/assets/index.html-0e9e4b3a.js" as="script"><link rel="prefetch" href="/assets/index.html-12858481.js" as="script"><link rel="prefetch" href="/assets/index.html-0247529f.js" as="script"><link rel="prefetch" href="/assets/index.html-21267412.js" as="script"><link rel="prefetch" href="/assets/index.html-4acf38da.js" as="script"><link rel="prefetch" href="/assets/index.html-f28801e4.js" as="script"><link rel="prefetch" href="/assets/index.html-d286dbf1.js" as="script"><link rel="prefetch" href="/assets/index.html-22cab04e.js" as="script"><link rel="prefetch" href="/assets/index.html-b8233d3a.js" as="script"><link rel="prefetch" href="/assets/index.html-31beec6a.js" as="script"><link rel="prefetch" href="/assets/index.html-1ee5676e.js" as="script"><link rel="prefetch" href="/assets/index.html-f83fc907.js" as="script"><link rel="prefetch" href="/assets/index.html-ebfc3abb.js" as="script"><link rel="prefetch" href="/assets/whmcs_saved.html-e44574f5.js" as="script"><link rel="prefetch" href="/assets/index.html-7e64b6d9.js" as="script"><link rel="prefetch" href="/assets/index.html-c201377f.js" as="script"><link rel="prefetch" href="/assets/index.html-3ec87d31.js" as="script"><link rel="prefetch" href="/assets/index.html-87f416f5.js" as="script"><link rel="prefetch" href="/assets/index.html-a8ce4f49.js" as="script"><link rel="prefetch" href="/assets/index.html-6d1480c5.js" as="script"><link rel="prefetch" href="/assets/index.html-1fc8e0bd.js" as="script"><link rel="prefetch" href="/assets/index.html-23985833.js" as="script"><link rel="prefetch" href="/assets/index.html-8ba2d8d8.js" as="script"><link rel="prefetch" href="/assets/index.html-7f5598c8.js" as="script"><link rel="prefetch" href="/assets/index.html-9854993a.js" as="script"><link rel="prefetch" href="/assets/index.html-233045da.js" as="script"><link rel="prefetch" href="/assets/index.html-fe10d519.js" as="script"><link rel="prefetch" href="/assets/index.html-95490bb8.js" as="script"><link rel="prefetch" href="/assets/404.html-e0575d4e.js" as="script"><link rel="prefetch" href="/assets/index.html-15344a68.js" as="script"><link rel="prefetch" href="/assets/index.html-e4942f19.js" as="script"><link rel="prefetch" href="/assets/index.html-76026c12.js" as="script"><link rel="prefetch" href="/assets/index.html-dd01c5e3.js" as="script"><link rel="prefetch" href="/assets/index.html-6a539da3.js" as="script"><link rel="prefetch" href="/assets/index.html-dffb4a30.js" as="script"><link rel="prefetch" href="/assets/index.html-49cc5a3d.js" as="script"><link rel="prefetch" href="/assets/index.html-3f7d7580.js" as="script"><link rel="prefetch" href="/assets/index.html-705234db.js" as="script"><link rel="prefetch" href="/assets/index.html-c032d564.js" as="script"><link rel="prefetch" href="/assets/index.html-744aec23.js" as="script"><link rel="prefetch" href="/assets/index.html-a8f9efa8.js" as="script"><link rel="prefetch" href="/assets/index.html-3bb3ded7.js" as="script"><link rel="prefetch" href="/assets/index.html-cd3fc076.js" as="script"><link rel="prefetch" href="/assets/index.html-e4d04411.js" as="script"><link rel="prefetch" href="/assets/index.html-ad4c8226.js" as="script"><link rel="prefetch" href="/assets/index.html-87c124aa.js" as="script"><link rel="prefetch" href="/assets/index.html-3fc17a32.js" as="script"><link rel="prefetch" href="/assets/index.html-cad6ab27.js" as="script"><link rel="prefetch" href="/assets/index.html-7d2379ef.js" as="script"><link rel="prefetch" href="/assets/whmcs_saved.html-36c40ae2.js" as="script"><link rel="prefetch" href="/assets/index.html-f608f0a9.js" as="script"><link rel="prefetch" href="/assets/index.html-ba3eda83.js" as="script"><link rel="prefetch" href="/assets/index.html-cf3b1789.js" as="script"><link rel="prefetch" href="/assets/index.html-8244b9d0.js" as="script"><link rel="prefetch" href="/assets/index.html-ae4757f1.js" as="script"><link rel="prefetch" href="/assets/index.html-be5b4dc7.js" as="script"><link rel="prefetch" href="/assets/index.html-0b6a05d2.js" as="script"><link rel="prefetch" href="/assets/index.html-3d1a53c5.js" as="script"><link rel="prefetch" href="/assets/index.html-e54bbe7c.js" as="script"><link rel="prefetch" href="/assets/index.html-4cb674c0.js" as="script"><link rel="prefetch" href="/assets/index.html-f9418e31.js" as="script"><link rel="prefetch" href="/assets/index.html-3738eab3.js" as="script"><link rel="prefetch" href="/assets/index.html-9d2f7136.js" as="script"><link rel="prefetch" href="/assets/index.html-28729b0f.js" as="script"><link rel="prefetch" href="/assets/404.html-2ec8d8e0.js" as="script"><link rel="prefetch" href="/assets/vue-bot-ui.common-d7beca41.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><header class="navbar fixed"><div class="navbar-header"><div class="navbar-header__logo-wrapper"><a href="/" class="home-link"><img class="logo" src="/global/logo.svg" alt="logo header"></a><div class="header-layout__search-container header-mobile__hidden"><!----><form id="search-form" class="drawer-header__input"><input type="text" value="" id="algolia-search-input" placeholder="Search" class="header-layout__search-default" maxlength="100"><div class="header-layout__search-icon-default"><img alt="search icon" src="/global/search.svg"><!----></div></form><div><div class="drawer"><div class="drawer-header"><div class="drawer-header__wrapper"><h2 class="drawer-header__paragraph">How can we help you?</h2><div id="drawerSearch"></div></div><div class="drawer-cross"><img class="drawer-cross__img" src="/global/cross.svg" alt="cross"><p class="drawer-cross__text">close</p></div></div><main><div class="drawer-main"><div class="drawer-main__wrapper"><div class="drawer-main__breadcrumb"><!-- Optional breadcrumb can stay here --></div><div><p class="no_results">Please type your search query, then press Enter or click the search button.</p></div></div></div><!----></main></div><!----></div></div></div><div class="links" style="max-width:nullpx;"><img class="navbar-header__mobile-search" src="/global/search.svg" alt="icon image"><div class="header-products-wrapper"><div class="dropdown"><!----><!----><div class="header-products-container"><img class="header-products-container__img" alt="hamburger menu" src="/global/hamburger-menu.svg"><p class="header-products-wrapper-paragraph">Products</p><img class="products-icon__default" width="10" height="8" src="/arrows/arrow-down.svg" alt="arrow down icon"></div></div></div><!--[--><a target="_blank" class="btn">Ask GPT?</a><a href="https://www.imunify360.com/support-portal/" target="_blank" class="btn">Submit support request</a><a href="https://trial4.imunify360.com/" target="_blank" class="btn btn-white">Try Free</a><!--]--></div></div><!----></header><!----><div class="page"><!--[--><!--]--><div class="breadcrumb-wrapper page-breadcrumb" data-v-9445381a><span class="breadcrumb-title" data-v-9445381a>Documentation:</span><!--[--><a aria-current="page" href="/email/" class="router-link-active router-link-exact-active breadcrumb" data-v-9445381a>Email</a><!--]--></div><img class="page-mobile__sidebar-menu" src="/global/sidebar-menu.svg" alt="sidebar hamburger menu"><div class="page-nav-wrapper"><!----></div><div class="content" custom="false"><h1 id="email" tabindex="-1"><a class="header-anchor" href="#email">#</a> Email</h1><h2 id="quick-start-guide" tabindex="-1"><a class="header-anchor" href="#quick-start-guide">#</a> Quick Start Guide</h2><p>Welcome to Imunify Email, a powerful plugin designed to enhance your Imunify360 experience with advanced email protection features such as:</p><ul><li><strong>Advanced Server Protection</strong>: Provides robust protection against outgoing spam, ensuring your server maintains a high reputation and reliable email delivery.</li><li><strong>Rate-Limit Settings</strong>: Allows you to define how many messages can be sent on behalf of specific accounts, domains, emails, or scripts, helping to prevent abuse and maintain control over email traffic.</li><li><strong>BETA: Incoming Filtration</strong>: A new feature, currently in beta, that can be enabled to protect your users from incoming spam. Learn more about enabling this feature <a href="https://docs.imunify360.com/email/#beta-incoming-emails-filtration" target="_blank" rel="noopener noreferrer">here</a>.</li></ul><h3 id="installation-steps" tabindex="-1"><a class="header-anchor" href="#installation-steps">#</a> Installation Steps</h3><div class="tip custom-block"><p class="custom-block-title">Requirements</p><ul><li>cPanel</li><li>Imunify360</li></ul></div><ol><li><p><strong>Install Imunify360</strong></p><p>Imunify Email is a plugin for the Imunify360 product. To use Imunify Email, you must first install Imunify360. Follow the <a href="https://docs.imunify360.com/installation/#installation-instructions" target="_blank" rel="noopener noreferrer">installation instructions for Imunify360</a> to get started.</p></li><li><p><strong>Enable Imunify Email in CLN</strong></p></li></ol><p>Once Imunify360 is installed and registered, you can enable the Imunify Email plugin through the CLN (CloudLinux Network) portal. This will automatically install all necessary components. Follow the <a href="https://docs.imunify360.com/email/#how-to-enable-imunify-email" target="_blank" rel="noopener noreferrer">instructions to enable Imunify Email in CLN</a>. For the system requirements and installation steps, refer to the <a href="https://docs.imunify360.com/email/#installation" target="_blank" rel="noopener noreferrer">Installation</a>.</p><h2 id="full-documentation" tabindex="-1"><a class="header-anchor" href="#full-documentation">#</a> Full Documentation</h2><h4 id="imunify-email-compatibility" tabindex="-1"><a class="header-anchor" href="#imunify-email-compatibility">#</a> Imunify Email compatibility</h4><p>Imunify Email has been checked for compatibility with following tools and mail gateways:</p><ul><li>Config Server Services <ul><li><a href="https://configserver.com/cp/osm.html" target="_blank" rel="noopener noreferrer">MailScanner</a></li><li><a href="https://configserver.com/cp/csf.html" target="_blank" rel="noopener noreferrer">Firewall</a></li></ul></li><li><a href="https://www.mailchannels.com/" target="_blank" rel="noopener noreferrer">MailChannels</a> from IE 0.6 version</li><li>SpamAssassin (incoming and outgoing configuration)</li><li><a href="https://www.smtp2go.com/" target="_blank" rel="noopener noreferrer">Smtp2go</a></li></ul><h3 id="installation" tabindex="-1"><a class="header-anchor" href="#installation">#</a> Installation</h3><div class="danger custom-block"><p class="custom-block-title">Note</p><p>Hosting administrator only. Imunify Email requires Imunify360 to be installed on the server.</p></div><div class="warning custom-block"><p class="custom-block-title"></p><p>Ensure that port 11335 is open. Additionally, note that it is a UDP server, and therefore, it is not accessible via telnet.</p></div><p>Imunify Email is simple to install. At the moment, it runs on the following distributions:</p><ul><li>CentOS 7, 8 with support of cPanel/WHM control panel.</li><li>CloudLinux OS 7, 8, 9 with support of cPanel/WHM control panel.</li><li>AlmaLinux 8, 9 with support of cPanel/WHM control panel.</li></ul><p>Minimum system requirements for installation:</p><p><strong>x64 | 512 Mb | 20 Gb disk space</strong></p><div class="tip custom-block"><p class="custom-block-title">Note</p><ul><li><p>Imunify Email RAM consumption depends on the mail traffic. In a waiting state it consumes little RAM, however for scanning large mails temporary increase of RAM consumption can be observed.</p></li><li><p>Used disk space depends on the number of accounts on a server. By default, each account will have 100 MB limitation for quarantine space. This limit can be adjusted using UI later.</p></li></ul></div><p>To install Imunify Email, you need to enable the corresponding option in your CLN account. After that the product will be installed automatically within 24 hours. To install it immediately you can use on of the following command as root user:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>/usr/bin/imunify360-agent update-license
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>or</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>wget https://repo.imunify360.cloudlinux.com/defence360/imunifyemail-deploy.sh
bash imunifyemail-deploy.sh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="details" tabindex="-1"><a class="header-anchor" href="#details">#</a> Details</h4><h4 id="users-created" tabindex="-1"><a class="header-anchor" href="#users-created">#</a> Users created</h4><p>During installation, the following users will be created:</p><ul><li>_rspamd</li><li>_imunifyemail</li></ul><p>The <code>_imunifyemail</code> user will also be added to the <code>_imunify</code> group.</p><h4 id="components-and-resources" tabindex="-1"><a class="header-anchor" href="#components-and-resources">#</a> Components and resources</h4><p>Imunify Email has the following components:</p><ul><li><strong>Imunify RSpamd</strong><ul><li>acts as an email filter</li><li>it is installed in system directories such as /etc/rspamd, /usr/bin, /usr/lib, /usr/share/rspamd, as a part of <code>imunify-email-rspamd</code> RPM package and brings <code>rspamd</code> service</li></ul></li><li>Quarantine (ie-quarantine) <ul><li>acts as a storage for quarantined emails and as a back-end for the user interface (UI) and CLI</li><li>it is installed in the /var/imunifyemail/quarantine directory, as a part of <code>imunify-email-quarantine</code> RPM package and brings <code>ie-quarantine</code> and <code>ie-notification</code> service.</li></ul></li><li>CLI (ie-cli) <ul><li>it is a command line interface for managing Quarantine and Activity Monitor that is installed as a part of <code>imunify-email-cli</code> RPM package</li></ul></li><li>Dec Node (ie-dec-node) <ul><li>it is a statistical component that helps to improve the filtering quality</li><li>it is installed in the /var/imunifyemail/dec-node directory, as a part of <code>imunify-email-dec-node</code> RPM package and brings <code>ie-dec-node</code> service</li></ul></li></ul><p>All these packages are installed as part of <code>imunify-email</code> RPM package.</p><h4 id="exim-configuration-modifications" tabindex="-1"><a class="header-anchor" href="#exim-configuration-modifications">#</a> Exim configuration modifications</h4><p>Imunify Email modifies Exim MTA configuration, adding RSpamd as a filter for email. It is done automatically during installation. In case if filtering needs to be disabled, see <a aria-current="page" href="/email/#disable-imunify-email" class="router-link-active router-link-exact-active">Disable Imunify Email</a>. When disabled, Exim configuration will not contain an RSpamd filter. To re-able Imunify Email, see <a aria-current="page" href="/email/#enable-imunify-email" class="router-link-active router-link-exact-active">Enable Imunify Email</a>.</p><p>The configuration change is compatible with WHM Advanced Editor, you can continue using it for other modifications.</p><h3 id="cln-managing-imunify-email" tabindex="-1"><a class="header-anchor" href="#cln-managing-imunify-email">#</a> CLN: Managing Imunify Email</h3><h4 id="how-to-enable-imunify-email" tabindex="-1"><a class="header-anchor" href="#how-to-enable-imunify-email">#</a> How to Enable Imunify Email</h4><h4 id="background" tabindex="-1"><a class="header-anchor" href="#background">#</a> Background</h4><p>In order to use ImunifyEmail you have to enable it in CLN. You can achieve it in two ways:</p><ol><li>via CLN UI</li><li>via CLN API</li></ol><p>When you enable/disable Imunify Email, the script will automatically run the corresponding action within 24 hours. In order to apply changes on the particular server immediately, please run the following command on behalf of the <code>root</code> user:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>imunify360-agent update-license
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="cln-ui-enable-disable-imunify-email" tabindex="-1"><a class="header-anchor" href="#cln-ui-enable-disable-imunify-email">#</a> CLN UI: enable/disable Imunify Email</h4><p>You can manage Imunify Email state on 3 levels: Account, Key, Server.</p><h4 id="_1-account" tabindex="-1"><a class="header-anchor" href="#_1-account">#</a> 1. Account</h4><p>To manage permission on an account level choose the “Enable for all servers” option.</p><p><img src="/images/ie-cln-enabled-for-all-users.png" alt=""></p><p>When you enable the feature on an account level, the script will install Imunify Email <strong>on all Imunify360 servers in your account</strong> in 24 hours.</p><p>When disabling the feature on an account level, the script will deactivate the Imunify Email <strong>on all Imunify360 servers in your account</strong> in 24 hours.</p><p>There&#39;s also a default option called “depends on lower level”. This allows you to control permissions based on each key or license, rather than for the whole account.</p><h4 id="_2-key" tabindex="-1"><a class="header-anchor" href="#_2-key">#</a> 2. Key</h4><p>To manage permission on a key level go to the “Activation keys” tab and select “add-ons”.</p><p><img src="/images/ie-cln-manage-keys.png" alt=""></p><p>You will see this screen:</p><p><img src="/images/ie-cln-permissions-depend.png" alt=""></p><p>When you enable the feature on all servers in the key, the script will install Imunify Email <strong>on all Imunify360 servers under this key</strong> in 24 hours.</p><p>When disabling the feature on a key level, the script will deactivate the Imunify Email <strong>on all Imunify360 servers under this key</strong> in your account in 24 hours.</p><p>There&#39;s also a default option called “depends on lower level”. This allows you to control permissions based on each server.</p><h4 id="_3-server" tabindex="-1"><a class="header-anchor" href="#_3-server">#</a> 3. Server</h4><p>To manage permission on a server level. Go to the “Servers” tab and select “add-ons”.</p><p><img src="/images/ie-cln-permissions-server-level.png" alt=""></p><p>You will see this pop up:</p><p><img src="/images/ie-cln-popup.png" alt=""></p><p>When you enable the feature, the script will install Imunify Email <strong>on a server</strong> in 24 hours.</p><p>When disabling the feature, the script will deactivate the Imunify Email <strong>on a server</strong> in 24 hours.</p><h4 id="cln-api-enable-disable-imunify-email" tabindex="-1"><a class="header-anchor" href="#cln-api-enable-disable-imunify-email">#</a> CLN API: enable/disable Imunify Email</h4><p>Useful links:</p><ol><li><a href="https://docs.cloudlinux.com/cloudlinux_rest_api.pdf" target="_blank" rel="noopener noreferrer">CLN API documentation</a> (page 30 is about Imunify Email)</li><li><a href="https://cln.cloudlinux.com/cln/api/webjars/swagger-ui/index.html#/" target="_blank" rel="noopener noreferrer">CLN API swagger file</a></li></ol><p>Imunify Email state is managed by the next requests:</p><ol><li><code>PATCH /api/v2/features/account</code>: to enable/disable Imunify Email for account.</li><li><code>PATCH /api/v2/imunify/keys</code>: to enable/disable Imunify Email for Imunify360 key.</li><li><code>PATCH /api/v2/imunify/server</code>: to enable/disable Imunify Email for server with Imunify360.</li></ol><p>In CLN terms Imunify Email is a &quot;feature&quot; and it has <strong>id=4600</strong>.</p><p>Below is a example of how to enable Imunify Email for particular server:</p><ol><li>Generate API token:</li></ol><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>$&gt; token=$(login=YOUR_CLN_LOGIN; ts=$(date +&quot;%s&quot;); secret=YOUR_CLN_SECRET; echo -n $login\|$ts\|$(echo -n $secret$ts| sha1sum) | cut -d &quot; &quot; -f1)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="2"><li>Get product names to product type id mapping:</li></ol><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>$&gt; curl -X &#39;GET&#39; -H &#39;accept: application/json&#39; -H &#39;Content-Type: application/json&#39; \
&#39;https://cln.cloudlinux.com/api/v2/ip-license/licenses/types?token=YOUR_TOKEN’ 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>Enable Imunify Email using its product type id (from the previous request) on a server using IP license:</li></ol><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>$&gt; curl -X &#39;PATCH&#39; -H &#39;accept: application/json&#39; -H &#39;Content-Type: application/json&#39; \
&#39;https://cln.cloudlinux.com/api/v2/imunify/server?token=YOUR_TOKEN&#39; \
--data &#39;{&quot;id&quot;: &quot;SERVER_ID_HERE&quot;, &quot;permissions&quot;: {&quot;4600&quot;: &quot;ENABLED&quot;}}&#39; 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Where &quot;4600&quot; the Imunify Email&#39;s feature id.</p><p>To enable Imunify Email on account/key level you have to follow almost the same algorithm but use endpoints (1)/(2) (refer to documentation above to get more details).</p><h3 id="beta-incoming-emails-filtration" tabindex="-1"><a class="header-anchor" href="#beta-incoming-emails-filtration">#</a> <strong>Beta</strong>: Incoming Emails Filtration</h3><div class="tip custom-block"><p class="custom-block-title">Highlights</p><p>ImunifyEmail now includes a <strong>beta</strong> feature for incoming email filtration, aimed at protecting server users from spam emails. This feature is currently in beta mode and is free to use.</p></div><h4 id="enabling-disabling-incoming-filtration" tabindex="-1"><a class="header-anchor" href="#enabling-disabling-incoming-filtration">#</a> Enabling/Disabling Incoming Filtration</h4><p>To enable the incoming filtration feature, the server administrator needs to run the following command from the console:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ie-config enable-incoming
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>To disable, run the following command:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ie-config disable-incoming
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Once you enable the feature, ImunifyEmail will start filtering incoming emails. Additionally, the UI in cPanel will be updated with the following changes:</p><ul><li><strong>Quarantine Tab</strong>: A new column will be added to show the email direction (whether the email is outgoing or incoming).</li><li><strong>Settings Tab</strong>: <ul><li>A toggle will be available to disable the incoming filtration feature for specific cPanel accounts.</li><li>A table will be added to display statistics of incoming emails, showing the number of spam and ham emails by day.</li></ul></li><li><strong>Statistics Tab</strong>: A new section will be added to display detailed statistics of incoming emails, including the number of spam and ham emails over time.</li></ul><p>The ie-cli utility reflects the same API as the UI, allowing customers to retrieve quarantine and statistics information via the command line interface. Use <code>--help</code> to get more info.</p><h3 id="user-interface-access" tabindex="-1"><a class="header-anchor" href="#user-interface-access">#</a> User interface access</h3><p>In order to access the UI as a hosting administrator, navigate to WHM -&gt; Plugins -&gt; Imunify360 -&gt; Email tab.</p><p>Your clients will be able to access the Imunify Email Quarantine under: cPanel -&gt; Security -&gt; Imunify360 -&gt; Email.</p><h3 id="version-and-status" tabindex="-1"><a class="header-anchor" href="#version-and-status">#</a> Version and Status</h3><h4 id="check-imunify-email-version" tabindex="-1"><a class="header-anchor" href="#check-imunify-email-version">#</a> Check Imunify Email version</h4><p>To find out which version of Imunify Email is installed, run the following command as root:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ie-config version
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="check-status" tabindex="-1"><a class="header-anchor" href="#check-status">#</a> Check status</h4><p>In order to check status of Imunify Email, run the following command as root:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ie-config status
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="disable-imunify-email" tabindex="-1"><a class="header-anchor" href="#disable-imunify-email">#</a> Disable Imunify Email</h4><p>In order to disable Imunify Email, you need to disable the corresponding option in your CLN account. Imunify Email will be disabled automatically within 24 hours. To disable it immediately, run following command as root:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>/usr/bin/imunify360-agent update-license
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>It will remove filter configuration and stop Imunify Email services.</p><h4 id="enable-imunify-email" tabindex="-1"><a class="header-anchor" href="#enable-imunify-email">#</a> Enable Imunify Email</h4><p>If Imunify Email was installed, but then disabled it can be re-enabled in CLN.</p><h3 id="whm-user-interface" tabindex="-1"><a class="header-anchor" href="#whm-user-interface">#</a> WHM user interface</h3><div class="danger custom-block"><p class="custom-block-title">Note</p><p>Hosting administrator only.</p></div><p>Imunify Email scans the outbound emails on the server and allows to identify viral mailings and other viral outbound mail content for all accounts on the server.</p><p>Click <span class="notranslate"><em>Email</em></span> in the main menu of the Imunify360 admin interface.</p><p><img src="/images/EmailMain.png" alt=""></p><p>The following tabs are available:</p><ul><li><span class="notranslate"><a aria-current="page" href="/email/#quarantine" class="router-link-active router-link-exact-active">Quarantine</a></span></li><li><span class="notranslate"><a aria-current="page" href="/email/#activity-monitor-and-sender-limits" class="router-link-active router-link-exact-active">Activity Monitor</a></span></li><li><span class="notranslate"><a aria-current="page" href="/email/#settings" class="router-link-active router-link-exact-active">Settings</a></span></li></ul><h3 id="quarantine" tabindex="-1"><a class="header-anchor" href="#quarantine">#</a> Quarantine</h3><p>Go to <span class="notranslate">Imunify360 → Email → Quarantine</span> tab. Here, there are emails that are considered viral or malicious for all accounts on the server. You can decline or confirm the Imunify Email decision and either release and send emails or remove them completely.</p><p><img src="/images/EmailQuarantineTab.png" alt=""></p><p>The table has the following columns:</p><ul><li><p><span class="notranslate"><strong>Account</strong></span> — account name</p></li><li><p><span class="notranslate"><strong>Received Date</strong></span> — when an email was received by the server for sending</p></li><li><p><span class="notranslate"><strong>Reasons</strong></span> — the reason why message has been quarantined</p><ul><li><span class="notranslate"><strong>spam</strong></span> — means that a message has been classified as a spam</li><li><span class="notranslate"><strong>winexec</strong></span> — means that a message contains windows executable attachments (you can allow that using ie-cli)</li><li><span class="notranslate"><strong>ratelimit</strong></span> — means that a message exceeded a limit per hour for one of the Account/Domain/Sender email/Script. You might adjust the limit using the &quot;Activity Monitor&quot; tab.</li></ul></li><li><p><span class="notranslate"><strong>Sender (From)</strong></span> — the user who sent the email</p></li><li><p><span class="notranslate"><strong>Recipients</strong></span> — recipients (including CC and BCC)</p></li><li><p><span class="notranslate"><strong>Subject</strong></span> — a subject from an email</p></li><li><p><span class="notranslate"><strong>Actions</strong></span></p><ul><li><span class="notranslate"><strong>Release &amp; Send</strong></span> — hosting admin can use multi-select and release &amp; send several emails at once</li></ul><p><img src="/images/EmailRelease.png" alt=""></p><ul><li><p><span class="notranslate"><strong>Delete</strong></span> — delete email permanently</p><p><img src="/images/EmailDelete.png" alt=""></p></li><li><p><span class="notranslate"><strong>View Email</strong></span> — view email content</p><p><img src="/images/EmailView1.png" alt=""></p><ul><li>Body - decoded email content with tags removed</li><li>Header - email Headers section</li><li>Plain text - headers plus original email body</li></ul></li></ul></li></ul><div class="tip custom-block"><p class="custom-block-title">Note</p><p>In this release, the notifications are not sent both when deleting or releasing an email. Will be added in the next release.</p></div><h3 id="activity-monitor-and-sender-limits" tabindex="-1"><a class="header-anchor" href="#activity-monitor-and-sender-limits">#</a> Activity Monitor and Sender limits</h3><p>Go to <span class="notranslate">Imunify360 → Email → Activity Monitor</span>. Activity Monitor provides a way to observe, control and regulate the flow of mail. From this tab the messages can be whitelisted or chosen to be explored in the Quarantine tab.</p><p>The table lists the following columns:</p><ul><li><strong>Sender Object</strong> - a set of origination information that can be identified about an email is shown here. The four possible categories are: <ul><li>WHM account</li><li>Domain</li><li>PHP Script (able to send an email)</li><li>Email address of a user</li></ul></li><li><strong>Ham/Sent out</strong> - quantity of a non-spam emails that were sent out is shown corresponding to a Sender Object in a first column.</li><li><strong>Limit</strong> - the number of emails that corresponding Sender Object will be allowed to send out in a space of one hour. This number turns red and a warning sign is displayed as soon as the limit is exceeded.</li><li><strong>Whitelisted</strong> - the records in this column only have two states &quot;true&quot; and &quot;false&quot; and show if the whitelisting is <strong>on</strong> or <strong>off</strong> for a particular Sender Object.</li><li><strong>Quarantined</strong> - reflects emails from a particular Sender Object and their quantity.</li><li><strong>Actions</strong> - several actions to perform on a particular Sender Object are available: <ul><li><strong>Go to quarantine</strong> allows to explore a particular Sender Object in a Quarantine tab.</li><li><strong>Update sender limit</strong> allows to enable/disable granular limits for a particular Sender Object that override limits set in the Settings tab.</li><li><strong>Whitelist sender</strong> allows to remove any limit on sending out emails for a particular Sender Object.</li></ul></li></ul><p><img src="/images/EmailActivityMonitor.png" alt=""></p><p>The <strong>Timeframe</strong> setting for the records visible in the table can be chosen from the following options under the <strong>Timeframe</strong> button.</p><p><img src="/images/EmileTimeframeBtn.png" alt=""></p><p>Records in the table are searchable and the parameters of the search can be narrowed down by using the Account name, Sender address, Domain, and Script filters.</p><p><img src="/images/EmailAdvSearch.png" alt=""></p><h4 id="sender-limits" tabindex="-1"><a class="header-anchor" href="#sender-limits">#</a> Sender limits</h4><p>This is the second level of control for sender limits. Limits set for a particular Sender Object here override the limits set on the previous stage.</p><p>Go to Imunify360 → Email → Activity Monitor → Actions → Update sender limit. For a particular Sender Object the limit can be switched on and off. The limit value can be set higher or lower than the value in the Setting tab. This setting is aimed at providing a way to set needed exceptions from the general rules.</p><p><img src="/images/EmailUpdSenderLimit.png" alt=""></p><h4 id="whitelisting" tabindex="-1"><a class="header-anchor" href="#whitelisting">#</a> Whitelisting</h4><p>This is the third level of control for sender limits. Limits set via this control override the limits set at the two the previous stages. Go to Imunify360 → Email → Activity Monitor → Actions → Whitelist sender. A particular Sender Object can be whitelisted, which means that the Sender limits will no longer be applied to this Sender Object - so it will be able to send out an unlimited number of messages. Only the <strong>domain</strong> and <strong>email of the user</strong> Sender Objects can be whitelisted, <strong>WHM account</strong> and <strong>PHP script</strong> cannot be whitelisted.</p><p><img src="/images/EmailWhitelist.png" alt=""></p><p>To confirm whitelisting for a particular Sender Object click <strong>Yes, add to whitelist</strong>.</p><p><img src="/images/EmailYesAdd.png" alt=""></p><h3 id="settings" tabindex="-1"><a class="header-anchor" href="#settings">#</a> Settings</h3><div class="danger custom-block"><p class="custom-block-title">Note</p><p>Hosting administrator only.</p></div><p>Go to <span class="notranslate">Imunify360 → Email → Settings</span> tab. The settings allow managing the space for quarantine and setting up limits for sending out the messages(set up a rate-limit) for all the Sender Objects adopts a 3-tier approach that is aimed to provide granular control over the outgoing messages to the administrator. An administrator can increase or decrease the space for the user&#39;s quarantine. If all space is consumed, the oldest emails in quarantine will be permanently deleted.</p><h4 id="activity-monitor-settings" tabindex="-1"><a class="header-anchor" href="#activity-monitor-settings">#</a> Activity Monitor Settings</h4><p>This is the first level of control for sender limits. The values set at this level will be default for an entire server and will be applied by default to all Sender Objects. Go to Imunify360 → Email →Settings tab. Here, set a limit on the number of emails that can be sent by a particular entity - WHM account, domain, PHP Script, or email address of a user.</p><ul><li>The limit is set for the number of messages within the space of the last 60 minutes.</li><li>The limits can be applied either to a number of emails or a number of recipients.</li></ul><p><img src="/images/EmailActivityMonitorDefaultsTab.png" alt=""></p><p>Once the values are chosen, press <strong>Save Changes</strong> to apply them.</p><h4 id="quarantine-settings" tabindex="-1"><a class="header-anchor" href="#quarantine-settings">#</a> Quarantine Settings</h4><div class="danger custom-block"><p class="custom-block-title"></p><p>You can modify the default settings for storage capacity and release limits for all accounts.</p><p><strong>Note</strong>: If you change these settings in an individual account, the default settings will no longer apply to that account.</p><p>To revert to the default settings, refer to the CLI section.</p></div><p><img src="/images/EmailQuarantineDefaultsTab.png" alt=""></p><p>The table has the following columns:</p><ul><li><p><span class="notranslate"><strong>Account</strong></span> — user account name</p></li><li><p><span class="notranslate"><strong>Storage Capacity MB</strong></span> — the space for the user&#39;s quarantine limit (default is 100 MB)</p></li><li><p><span class="notranslate"><strong>Used Space MB</strong></span> — the space used by files in quarantine (slight excess of the limit is possible)</p></li><li><p><span class="notranslate"><strong>Releases limit</strong></span> — limit for releases per hour for non-root user</p></li><li><p><span class="notranslate"><strong>State</strong></span> — the state of the user&#39;s quarantine.</p></li><li><p><span class="notranslate"><strong>Details</strong></span> — emails deleted permanently for the last hour</p></li><li><p><span class="notranslate"><strong>Actions</strong></span></p><ul><li><p><span class="notranslate"><strong>Purge quarantine</strong></span> — purge all quarantine for an account</p><p><img src="/images/EmailPurge.png" alt=""></p></li><li><p><span class="notranslate"><strong>Add</strong></span> — change the limit of the space for the user&#39;s (account) quarantine</p></li></ul><p><img src="/images/EmailAdd.png" alt=""></p></li></ul><h3 id="imunify-email-command-line-interface" tabindex="-1"><a class="header-anchor" href="#imunify-email-command-line-interface">#</a> Imunify Email Command Line Interface</h3><p>The Command Line Interface (CLI) is designed to simplify usage of Imunify Email and as an enabler for integration with other tools and platforms.</p><p>Main command for all operations with Imunify Email:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ie-cli
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="basic-usage" tabindex="-1"><a class="header-anchor" href="#basic-usage">#</a> Basic usage</h4><p>Imunify Email quarantine CLI application</p><p><strong>Usage</strong>:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ie-cli [command] [arguments]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Use <code>--help</code> key to get list of the available commands and to get help for the particular command, e.g. <code>ie-cli whitelist sender --help</code> .</p><p><strong>Available Commands</strong>:</p><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td><code>accounts</code></td><td>interaction with accounts in the quarantine</td></tr><tr><td><code>am</code></td><td>interaction with the Activity Monitor, same API as in ActivityMonitor UI</td></tr><tr><td><code>emails</code></td><td>interaction with emails in the quarantine</td></tr><tr><td><code>filter-settings</code></td><td>toggle the filter settings, without any parameters - returns the current settings</td></tr><tr><td><code>quarantine-defaults</code></td><td>interaction with default settings in the Quarantine</td></tr><tr><td><code>version</code></td><td>print the ImunifyEmail CLI version</td></tr><tr><td><code>whitelist</code></td><td>interaction with the whitelist of authenticated users, senders and recipients</td></tr></tbody></table><p><strong>Flags</strong>:</p><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td><code>-h</code>, <code>--help</code></td><td>Help for ie-cli</td></tr></tbody></table><h3 id="operations-with-emails-in-the-quarantine" tabindex="-1"><a class="header-anchor" href="#operations-with-emails-in-the-quarantine">#</a> Operations with emails in the quarantine</h3><p>Emails marked as spam by Imunify Email are stored in the quarantine. The following section describes CLI for operating with emails.</p><div class="tip custom-block"><p class="custom-block-title">Note</p><p>The quarantine is keeping email for various users separately, but root users can see all the emails and perform any operations on them.</p></div><div class="tip custom-block"><p class="custom-block-title">Note</p><p>Almost all CLI commands support output in plain text and JSON format. For switching output to JSON use <code>--json</code></p></div><h4 id="list-emails-in-quarantine" tabindex="-1"><a class="header-anchor" href="#list-emails-in-quarantine">#</a> List emails in quarantine</h4><p>In order to see all emails stored use the following command. By default &#39;root&#39; account is used, so the command shows the whole content of the quarantine.</p><p><strong>Command</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ie-cli emails list --help

list emails in the quarantine, order by quarantined date descending

Usage:
  ie-cli emails list [flags]

Flags:
  -a, --account string   an account name
  -h, --help             help for list
      --json             output in json format
  -l, --limit int        The maximum count of items to return (default 25)
  -s, --since string     show entries starting from [now - since] time
                         format: [DIGIT(s)][MODIFIER]
                         	supported modifiers &#39;s&#39; - seconds, &#39;m&#39; - minutes, &#39;h&#39; - hours, &#39;d&#39; - days, e.g. 1h, 2d
                         	examples: 100s, 5m, 1h, 5d (default &quot;30d&quot;)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Example</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ie-cli emails list -a root --since 24h
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>That command shows all the quarantined emails for all accounts that have been quarantined within last 24 hours.</p><p><strong>Output</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>-----------------------------------------------------------------------------------------------------------
Email_ID ef69f707-d547-4b29-b8f0-f5331821c930
Size_Bytes	      8190
Account_Name	  mws
Recipients	      me@somehost.com
Subject        	  Ge t G:eneric V1agra f:or as 1ow as $2.50 per 50 mg

----------------------------------------------------------------------------------------------------------
Email_ID faf96a73-5be4-481a-9c6c-7ab8fb2e3cf0
Size_Bytes	      8534
Account_Name	  mws
Recipients	      frank@yahooo.com
Subject           FWD: Want Pills V|AgR@ % Xan_a_x ^ Valiu|m| # At|v@`n \ Pn+ermin &#39; So+m+a  lNmAL

-----------------------------------------------------------------------------------------------------------
Email_ID fbc2efd0-1808-4e54-99ce-3082708b28ee
Size_Bytes	      8971
Account_Name	  oregdent
Recipients	      steve@hillcabinet.com
Subject        	  FWD:Xanax.x Valium.m Xanax.x Vicodin.n h ogzmwggi

-----------------------------------------------------------------------------------------------------------
Max Count	     3
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Example with JSON as output format</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ie-cli emails list -a root –-json
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>Output</strong></p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>{
  &quot;items&quot;: [
    {
      &quot;email_id&quot;: &quot;ef69f707-d547-4b29-b8f0-f5331821c930&quot;,
      &quot;size_bytes&quot;: 8190,
      &quot;account_name&quot;: &quot;mws&quot;,
      &quot;recipients&quot;: [
        &quot;me@somehost.com&quot;
      ],
      &quot;subject&quot;: &quot;Ge t G:eneric V1agra f:or as 1ow as $2.50 per 50 mg&quot;,
      &quot;script_header&quot;: {
        &quot;raw&quot;: &quot;&quot;,
        &quot;domain&quot;: &quot;&quot;,
        &quot;path&quot;: &quot;&quot;
      }
    },
    {
      &quot;email_id&quot;: &quot;faf96a73-5be4-481a-9c6c-7ab8fb2e3cf0&quot;,
      &quot;size_bytes&quot;: 8534,
      &quot;account_name&quot;: &quot;mws&quot;,
      &quot;recipients&quot;: [
        &quot;frank@yahooo.com&quot;
      ],
      &quot;subject&quot;: &quot;FWD: Want Pills V|AgR@ % Xan_a_x ^ Valiu|m|  lNmAL&quot;,
      &quot;script_header&quot;: {
        &quot;raw&quot;: &quot;&quot;,
        &quot;domain&quot;: &quot;&quot;,
        &quot;path&quot;: &quot;&quot;
      }
    },
    {
      &quot;email_id&quot;: &quot;fbc2efd0-1808-4e54-99ce-3082708b28ee&quot;,
      &quot;size_bytes&quot;: 8971,
      &quot;account_name&quot;: &quot;oregdent&quot;,
      &quot;recipients&quot;: [
        &quot;steve@hillcabinet.com&quot;
      ],
      &quot;subject&quot;: &quot;FWD:Xanax.x Valium.m Xanax.x Vicodin.n h ogzmwggi&quot;,
      &quot;script_header&quot;: {
        &quot;raw&quot;: &quot;&quot;,
        &quot;domain&quot;: &quot;&quot;,
        &quot;path&quot;: &quot;&quot;
      }
    }
  ],
  &quot;max_count&quot;: 3
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="show-email-message" tabindex="-1"><a class="header-anchor" href="#show-email-message">#</a> Show Email message</h3><p>Root user, if needed, can see any message held in a quarantine. In order to do this email ID is needed. It can be taken from the list command above.</p><div class="tip custom-block"><p class="custom-block-title">Note</p><p>Don’t forget to specify a user account. For root user use <code>-a root</code>.</p></div><p><strong>Command</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ie-cli emails show --id &lt;EMAIL_ID&gt; [-a &lt;ACCOUNT_NAME&gt;] [--json]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>Example</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ie-cli emails show --id f3367f1b-4216-4f4f-9617-f8be9f5a6e76 -a root
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>Output</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>EmailID:                      f3367f1b-4216-4f4f-9617-f8be9f5a6e76
SizeBytes:                    8534
AccountName:                  mws
Sender:                       mws@mywebsite.com
Recipients:                   me@somehost.com
ReceivedDate:                 1643805800
Subject:                      FWD: Want Pills V|AgR@ % Xan_a_x ^ Valiu|m| # At|v@`n \ Pn+ermin &#39; So+m+a  lNmAL

Content-Transfer-Encoding:    quoted-printable
Content-Type:                 text/html; charset=&quot;iso-8859-7&quot;
Date:                         Fri, 13 Feb 2019 04:48:28 +0300
From:                         &quot;wilhelmina rivard&quot; &lt;rivard1792@hinet.net&gt;
MIME-Version:                 1.0
Received:                     from [70.100.200.300] (port=56330 helo=Myaccout) by 70.100.200.300.cprapid.com with esmtpsa  (TLS1.2) tls TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384 (Exim 4.94.2) (envelope-from &lt;mws@mydomain.com&gt;) id 1nFEym-0005TO-Qs for me@somehost.com; Wed, 02 Feb 2022 12:43:20 +0000
To:                           &lt;abazis@iit.demokritos.gr&gt;

X-ImunifyEmail-Filter-Action: reject
X-ImunifyEmail-Filter-Score:  6.1
X-Mimeole:                    Produced By Microsoft MimeOLE V6.00.2900.2527
X-Msmail-Priority:            Normal
X-Priority:                   3
X-Failed-Recipients:          []

Body: PCFET0NUWVBFIGh0bWwgcHVibGljICItLy9XM0MvL0RURCBIVE1MIDQuMDEgVHJhbnNpdGlvbmFsLy9FTiIgPQoiaHR0cDovL3d3dy53My5vcmcvVFIvaHRtbDQvbG9vc2UuZHRkIj4KPEhUTUw+CjxIRUFEPgo8VElUTEU+QWxsIFlvdXIgTWVkcyBIZXJlPC9USVRMRT4KPE1FVEEgaHR0cC1lcXVpdj0zRCJDb250ZW50LXR5cGUiIGNvbnRlbnQ9M0QidGV4dC9odG1sOyA9CmNoYXJzZXQ9M0RJU08tODg1OS0xIj4KPFNUWUxFIHR5cGU9M0QidGV4dC9jc3MiPgo8IS0tIC5zdHlsZTUge2ZvbnQtZmFtaWx5OiBBcmlhbCwgSGVsdmV0aWNhLCBzYW5zLXNlcmlmOyBmb250LXNpemU6ID0KMTRweDsgfT0yMAo8IS0tIC5zdHlsZTgge2ZvbnQtZmFtaWx5OiBBcmlhbCwgSGVsdmV0aWNhLCBzYW5zLXNlcmlmOyBmb250LXNpemU6IDhweDsgPQp9PTIwCi0tPjwvU1RZTEU
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="release-or-remove-a-message-from-the-quarantine" tabindex="-1"><a class="header-anchor" href="#release-or-remove-a-message-from-the-quarantine">#</a> Release or Remove a message from the quarantine</h3><p>Messages can be released from the quarantine and sent to recipients if they are false positives. They can also be deleted if needed to free up space.</p><div class="tip custom-block"><p class="custom-block-title">Note</p><p>The quarantine will automatically delete the oldest messages when the user&#39;s quarantine limit is reached. The limit can be adjusted in settings.</p></div><div class="tip custom-block"><p class="custom-block-title">Note</p><p>Non-root users are currently limited to releasing only 5 messages from quarantine per hour. This limit can be adjusted using the ie-cli command-line interface (CLI) tool.</p></div><h4 id="release" tabindex="-1"><a class="header-anchor" href="#release">#</a> Release</h4><p><strong>Command</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ie-cli emails release --ids EMAIL_ID_1,EMAIL_ID_2 -a root
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>Example</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ie-cli emails release --ids fb7c3537-8e5e-43d8-bc66-bd954c22d587 -a root
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>Output</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>OK
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="remove" tabindex="-1"><a class="header-anchor" href="#remove">#</a> Remove</h4><p><strong>Command</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ie-cli emails remove --ids fb7c3537-8e5e-43d8-bc66-bd954c22d587 -a root
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>Output</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>OK
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="accounts-settings" tabindex="-1"><a class="header-anchor" href="#accounts-settings">#</a> Accounts settings</h3><p>ImunifyEmail stores emails marked as spam in a quarantine space. The space is divided into virtual subspaces for every system account. Subspace is created when the first spam message is quarantined. It is filled with spam messages for a particular account until the size limitation is reached. When the size limitation is reached most old messages will be automatically deleted.</p><div class="tip custom-block"><p class="custom-block-title">Note</p><p>Default limit for a quarantine subspace is 100 MB.</p></div><div class="tip custom-block"><p class="custom-block-title">Note</p><p>In some cases ImunifyEmail can’t attribute an email to a system account. In such cases the email will be stored under root user quarantine space.</p></div><p>There are command line commands for managing quarantine space.</p><h4 id="list-all-accounts-in-the-quarantine" tabindex="-1"><a class="header-anchor" href="#list-all-accounts-in-the-quarantine">#</a> List all accounts in the quarantine</h4><p><strong>Command</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ie-cli accounts list [--json]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>Output</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>Name      	     LimitBytes	     UsedBytes	     State
mysite           125829120  	 810692     	 active
dentistcenter    104857600  	 0          	 active

Max Count 2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Output (JSON)</strong></p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>{
   &quot;items&quot;:[
      {
         &quot;name&quot;:&quot;mysite&quot;,
         &quot;limit_bytes&quot;:125829120,
         &quot;used_bytes&quot;:810692,
         &quot;state&quot;:&quot;active&quot;
      },
      {
         &quot;name&quot;:&quot;dentistcenter&quot;,
         &quot;limit_bytes&quot;:104857600,
         &quot;used_bytes&quot;:0,
         &quot;state&quot;:&quot;active&quot;
      }
   ],
   &quot;max_count&quot;:2
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="edit-account-size-limit" tabindex="-1"><a class="header-anchor" href="#edit-account-size-limit">#</a> Edit account size limit</h4><p>Sometimes it is necessary to give more (or less) space in the quarantine for some user accounts. It is possible to do using the following command.</p><p><strong>Command</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ie-cli accounts edit -a ACCOUNT_NAME [--state=active|block] [--limit=1024]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>Example</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ie-cli accounts edit -a mydomain --state=active --limit=8096
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>Output (JSON)</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>Name       LimitBytes	 UsedBytes	 State
mws        8096          810692      active
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Output</strong></p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>{
   &quot;name&quot;:&quot;mws&quot;,
   &quot;limit_bytes&quot;:8096,
   &quot;used_bytes&quot;:160461,
   &quot;state&quot;:&quot;active&quot;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="edit-account-releases-limit" tabindex="-1"><a class="header-anchor" href="#edit-account-releases-limit">#</a> Edit account releases-limit</h4><p>Users&#39; hourly <code>releases-limit</code> values can be adjusted according to your needs. This allows for a more dynamic and responsive management of user activity, ensuring optimal operational efficiency.</p><p>To view the current account settings, use the following command:</p><p><strong>Command</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ie-cli accounts list --name=imunifyemail
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>Output</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>Name             LimitBytes      UsedBytes       State   ReleasesLimit (hourly)
imunifyemail     104857600       8324            active          5
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>To modify the release limit, use the <code>ie-cli accounts edit</code> command followed by the <code>--name</code> parameter (to specify the account) and the <code>--releases-limit</code> parameter (to set the new limit). For example:</p><p><strong>Command</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ie-cli accounts edit --name=imunifyemail --releases-limit=50
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>Output</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>Name             LimitBytes      UsedBytes       State   ReleasesLimit (hourly)
imunifyemail     104857600       8324            active          50
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="clean-all-quarantine-for-an-account" tabindex="-1"><a class="header-anchor" href="#clean-all-quarantine-for-an-account">#</a> Clean all quarantine for an account</h4><p>If needed all quarantine for an account can be cleaned with one command.</p><p><strong>Command</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ie-cli accounts remove -a &lt;ACCOUNT_NAME&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>Example</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ie-cli accounts remove -a root
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>Output</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>OK
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="whitelisting-1" tabindex="-1"><a class="header-anchor" href="#whitelisting-1">#</a> Whitelisting</h3><p>Imunify Email supports whitelisting configuration. It is possible to whitelist domains and/or email addresses of a sender.</p><div class="warning custom-block"><p class="custom-block-title">Warning</p><p>When sender is whitelisted Imunify Email bypasses it’s emails without filtering. It may affect hosting reputation if a whitelisted sender will send spam.</p></div><h4 id="available-commands" tabindex="-1"><a class="header-anchor" href="#available-commands">#</a> Available commands</h4><p>In general, all whitelisting operations could be described by the next pattern:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ie-cli whitelist WHO OPERATION [value1 value2 ... valueN]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Where <code>WHO</code> is one of:</p><ul><li>authuser (only email address)</li><li>sender (email address or domain name)</li></ul><p><code>OPERATION</code> is one of:</p><ul><li>add</li><li>list</li><li>remove</li></ul><p><code>value1 valu2 ... valueN</code> - email addresses and domains (actual for the <code>add</code> and <code>remove</code> commands)</p><p><strong>Command</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ie-cli whitelist --help
List/Add/Delete authenticated users, senders and recipients to/from whitelist.
Where :
    - authenticated user could be only an email address
    - sender and recipient could be one of domain or email address

Usage:
  ie-cli whitelist [command]

Available Commands:
  authuser    operation with the whitelist of the authenticated users (email addresses)
  sender      operation with the whitelist of senders (email addresses and domains)

Flags:
  -h, --help   help for whitelist

Use &quot;ie-cli whitelist [command] --help&quot; for more information about a command.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="see-all-whitelist-senders" tabindex="-1"><a class="header-anchor" href="#see-all-whitelist-senders">#</a> See all whitelist senders</h4><p><strong>Command</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ie-cli whitelist authuser list  [--json]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>Output</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>EMAILS
1@example5.com
pp@ppp.com
qq@qq.com
me@mydomain.com

DOMAINS
No available data
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Output (JSON)</strong></p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>{
 	&quot;success&quot;: true,
 	&quot;emails&quot;: [
 		&quot;1@example5.com&quot;,
 		&quot;pp@ppp.com&quot;,
 		&quot;qq@qq.com&quot;,
 		&quot;me@mydomain.com&quot;
 	],
 	&quot;domains&quot;: []
 }
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="whitelist-a-sender" tabindex="-1"><a class="header-anchor" href="#whitelist-a-sender">#</a> Whitelist a sender</h4><p>To whitelist a domain or/and an email address use the following command.</p><p><strong>Command</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ie-cli whitelist sender add domain.com some_email@domain.com
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>Output</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>Adding sender(s) to the whitelist:
1. domain    domain.com
2. email     some_email@domain.com
OK
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="remove-sender-from-the-whitelist" tabindex="-1"><a class="header-anchor" href="#remove-sender-from-the-whitelist">#</a> Remove sender from the whitelist</h4><p>If needed, the sender can be removed from the whitelist. See the following commands.</p><p><strong>Command</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ie-cli whitelist sender remove domain.com
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>Output</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>Removing sender(s) from the whitelist:
1. domain    domain.com
OK
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="quarantine-default-settings-releases-limit-and-storage-capacity" tabindex="-1"><a class="header-anchor" href="#quarantine-default-settings-releases-limit-and-storage-capacity">#</a> Quarantine default settings (releases limit and storage capacity)</h3><p>Two commands are available: set and edit Please run with <code>--help</code> flag to get more info</p><p><strong>Command</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ie-cli quarantine-defaults --help
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="list-command" tabindex="-1"><a class="header-anchor" href="#list-command">#</a> <code>list</code> Command</h4><p><strong>Note</strong>: The --json flag is available to output in JSON format.</p><p><strong>Example</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ie-cli quarantine-defaults list
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>Output</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>Setting          IntValue
limit_bytes      104857600
releases_limit   5
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="set-command" tabindex="-1"><a class="header-anchor" href="#set-command">#</a> <code>set</code> Command</h4><p><strong>Command</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ie-cli quarantine-defaults set --help

Set default settings for accounts. Use -1 to set common default value.

Usage:
ie-cli quarantine-defaults set [flags]

Flags:
-h, --help help for set
--json output in json format
-r, --releases-limit Limit for releases per hour for non-root user
-s, --storage-capacity Limit in MB for the storage in the Quarantine for the account
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Example</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ie-cli quarantine-defaults set --releases-limit 50 --storage-capacity 120
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>That command sets the releases limit to 50 per hour and storage capacity to 120 MB.</p><p><strong>Output</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>Setting          IntValue
limit_bytes      125829120
releases_limit   50
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="activity-monitor" tabindex="-1"><a class="header-anchor" href="#activity-monitor">#</a> Activity Monitor</h3><p>To get understanding of Activity Monitor see the next section. <code>ie-cli</code> provides and API to get the same information as UI does from the Activity Monitor. <code>ie-cli</code> allows to</p><ol><li>get the Activity Monitor statistics</li><li>set/remove/update sender limits for the particular account/domain/email/script</li><li>get/update server limits that applied by default</li></ol><p><strong>Command</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ie-cli am --help

This subcommand interacts with the Activity Monitor to return statistics, get/set settings for
the sender objects.
Activity Monitor operates by the sender objects. Sender object is an object on behalf of which
client sends email. It could be one of: &quot;account&quot;, &quot;domain&quot;, &quot;script&quot; or &quot;sender_email&quot;

Usage:
  ie-cli am [command]

Available Commands:
  limit           The limit value of sender object can be applied on particular domain, sender email and account
  server-settings Operates by the server sender limit settings and allows to set default limit that is applied for all sender objects
  stats           stats (statistics) returns the aggregated view of senders objects with various filters

Flags:
  -h, --help   help for am

Use &quot;ie-cli am [command] --help&quot; for more information about a command.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="usage-of-limit-subcommand" tabindex="-1"><a class="header-anchor" href="#usage-of-limit-subcommand">#</a> Usage of limit subcommand</h4><p>The <code>ie-cli am limit</code> command is a versatile tool that enables you to assign a limit value to any sender object. This object could be an <code>account</code>, <code>domain</code>, <code>sender email</code>, or <code>script</code>. The command can be further customized with the use of specific flags and subcommands.</p><p>The set subcommand is available for use with this command. Its primary function is to establish a limit for the designated sender object(s).</p><p>In the context of the <code>&quot;ie-cli am limit set&quot;</code> command, the flags that can be used include <code>&quot;--id string&quot;</code>, <code>&quot;--limit int&quot;</code>, and <code>&quot;--so-type string&quot;</code>.</p><div class="tip custom-block"><p class="custom-block-title">Note</p><p>In order to set a limit, it&#39;s essential to know the sender object&#39;s id. This id can be obtained from the <code>ie-cli am stats</code> subcommand. For guidance on how to obtain the sender object id, please refer to the <a href="#usage-of-stats-subcommand"><code>ie-cli am stats</code> documentation provided below.</a></p></div><p><strong>Command</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ie-cli am limit set --help
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>Output</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>set limit for the sender object(s)

Usage:
  ie-cli am limit set [flags]

Flags:
  -h, --help             help for set
      --id string        The id of sender object
      --limit int        The limit value, 0 means unlimited (default -1)
      --so-type string   supported values: [account domain sender_email script]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The utilization of the limit subcommand varies according to the sender-object types (--so-type);</p><p><strong>Command usage with <code>--so-type=&quot;account&quot;</code> for set limit</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ie-cli am limit set --id=&quot;11111111-1111-1111-1111-11111111111&quot; --limit=3 --so-type=&quot;account&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>Command usage with <code>--so-type=&quot;domain&quot;</code> for set limit</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ie-cli am limit set --id=&quot;22222222-2222-2222-2222-222222222222&quot; --limit=5 --so-type=&quot;domain&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>Command usage with <code>--so-type=&quot;sender_email&quot;</code> for set limit</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ie-cli am limit set --id=&quot;33333333-3333-3333-3333-333333333333&quot; --limit=7 --so-type=&quot;sender_email&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>Output</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>OK
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="tip custom-block"><p class="custom-block-title">Note</p><p>Modifications can be tracked by navigating through the User Interface (UI) via <code>Imunify360 -&gt; Email -&gt; Activity Monitor</code>.</p></div><h4 id="usage-of-server-settings-subcommand" tabindex="-1"><a class="header-anchor" href="#usage-of-server-settings-subcommand">#</a> Usage of server-settings subcommand</h4><p>The <code>ie-cli am server-settings</code> command is designed to manage server sender limit settings, allowing you to establish a default limit that is applied to any sender object by default. This command can be further customized with the use of specific flags and subcommands.</p><p>The <code>ie-cli am server-settings set</code> command is designed to modify the server sender limit settings. This command can be paired with specific flags to establish the limit mode and eliminate limits for certain sender objects.</p><p>The <code>--limit-mode int</code> flag is utilized to define the limit mode. The limit mode can be either 1 or 2, where 1 signifies limit mode by sender and 2 denotes limit mode by the number of recipients.</p><p>To eliminate the limit for any sender object, a value of 0 can be used. For instance, to remove the limit for an account, the <code>--account=0</code> command can be employed. A value of 0 indicates that the sender object will have no restrictions, effectively rendering it unlimited.</p><p>Additional flags encompass <code>--account int</code>, <code>--domain int</code>, <code>--script int</code>, and <code>--sender-email int</code>. These are utilized to establish the threshold for any account, domain, script, or sender email, correspondingly. The default value for these flags is set to -1.</p><p>The existing <code>server-settings</code> can be accessed by utilizing the <code>ie-cli am server-settings</code> command.</p><p><strong>Command</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ie-cli am server-settings
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>Output</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>{
    &quot;account&quot;: 0,
    &quot;domain&quot;: 1,
    &quot;limit_mode&quot;: 1,
    &quot;script&quot;: 0,
    &quot;sender_email&quot;: 0
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>To establish the limit mode to 2 (limit by the number of recipients) and designate any limit for a domain, the subsequent command could be utilized: <code>ie-cli am server-settings set --limit-mode=2 --domain=100</code>.</p><p><strong>Command</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ie-cli am server-settings set --limit-mode=2 --domain=100
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>Output</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>New server settings is:
{
    &quot;account&quot;: 0,
    &quot;domain&quot;: 100,
    &quot;limit_mode&quot;: 2,
    &quot;script&quot;: 0,
    &quot;sender_email&quot;: 0
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>For instance, to configure the limit mode to 1 (limit by sender) and eliminate the limit for any account, the following command could be employed: <code>ie-cli am server-settings set --limit-mode=1 --account=0</code>.</p><p><strong>Command</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ie-cli am server-settings set --limit-mode=1 --account=0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>Output</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>New server settings is:
{
    &quot;account&quot;: 0,
    &quot;domain&quot;: 100,
    &quot;limit_mode&quot;: 1,
    &quot;script&quot;: 0,
    &quot;sender_email&quot;: 0
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="usage-of-stats-subcommand" tabindex="-1"><a class="header-anchor" href="#usage-of-stats-subcommand">#</a> Usage of stats subcommand</h4><p>The <code>ie-cli am stats</code> command provides a consolidated view of sender objects, complete with a variety of filters. This command can be paired with specific flags to refine the results.</p><p>The flags include <code>--account-name string</code>, <code>--domain string</code>, <code>--limit int</code>, <code>--offset int</code>, <code>--script-name string</code>, <code>--sender-email string</code>, and <code>--since string</code>. These are employed to filter by account name, domain, limit the quantity of results, set the offset for results, filter by script name, filter by sender email, and set the duration in seconds that has elapsed from the flag value until the present moment, respectively.</p><p>The <code>--limit int</code> flag also indicates that the limit applied pertains solely to the number of accounts in the response, with a default of 25.</p><p>The <code>--since string</code> flag defaults to a value of 1 hour - <code>1h</code>.</p><div class="tip custom-block"><p class="custom-block-title">Note</p><p>The functionality mirrors that of the ActivityMonitor user interface.</p></div><p><strong>Command</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ie-cli am stats --help
stats (statistics) returns the aggregated view of senders objects with various filters

Usage:
  ie-cli am stats [flags]

Flags:
      --account-name string   Account name to filter
      --domain string         Domain to filter
  -h, --help                  help for stats
      --limit int             How many results to return (pagination). The limit applied only for number of accounts in response (default 25)
      --offset int            From which offset results to return (pagination)
      --script-name string    Script name to filter
      --sender-email string   Sender email to filter
      --since string          show entries starting from [now - since] time
                              format: [DIGIT(s)][MODIFIER]
                              	supported modifiers &#39;s&#39; - seconds, &#39;m&#39; - minutes, &#39;h&#39; - hours, &#39;d&#39; - days, e.g. 1h, 2d
                              	examples: 100s, 5m, 1h, 5d (default &quot;1h&quot;)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>By using the stats command directly, all sender objects are returned as follows. The <code>--since</code> flag can be used to retrieve sender objects within a certain period of time.</p><p><strong>Command</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ie-cli am stats --since 10h
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>Output</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>{
  &quot;accounts&quot;: [
    {
        &quot;domains&quot;: [
            {
                &quot;account_id&quot;: &quot;11111111-1111-1111-1111-11111111111&quot;,
                &quot;exclusion&quot;: false,
                &quot;id&quot;: &quot;22222222-2222-2222-2222-222222222222&quot;,
                &quot;limit&quot;: 0,
                &quot;messages&quot;: 1,
                &quot;name&quot;: &quot;domain.com&quot;,
                &quot;quarantined&quot;: 1,
                &quot;rateLimited&quot;: false,
                &quot;sender_emails&quot;: [
                    {
                        &quot;account_id&quot;: &quot;11111111-1111-1111-1111-11111111111&quot;,
                        &quot;domain_id&quot;: &quot;22222222-2222-2222-2222-222222222222&quot;,
                        &quot;exclusion&quot;: false,
                        &quot;id&quot;: &quot;33333333-3333-3333-3333-333333333333&quot;,
                        &quot;limit&quot;: 0,
                        &quot;messages&quot;: 1,
                        &quot;name&quot;: &quot;test@domain.com&quot;,
                        &quot;quarantined&quot;: 1,
                        &quot;rateLimited&quot;: false,
                        &quot;whitelisted&quot;: false
                    }
                ],
                &quot;whitelisted&quot;: false
            },
        ],
        &quot;exclusion&quot;: false,
        &quot;id&quot;: &quot;11111111-1111-1111-1111-11111111111&quot;,
        &quot;limit&quot;: 0,
        &quot;messages&quot;: 1,
        &quot;name&quot;: &quot;domain&quot;,
        &quot;quarantined&quot;: 1,
        &quot;rateLimited&quot;: false,
        &quot;scripts&quot;: null,
        &quot;whitelisted&quot;: false
    }
  ]
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Command usage with <code>--sender-email</code> for get sender-object id</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ie-cli am stats --sender-email=test@domain.com
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>Command usage with <code>--account-name</code> for get sender-object id</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ie-cli am stats --account-name=domain --since 30d
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>Output</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>{
  &quot;accounts&quot;: [
    {
        &quot;domains&quot;: [
            {
                &quot;account_id&quot;: &quot;11111111-1111-1111-1111-11111111111&quot;,
                &quot;exclusion&quot;: false,
                &quot;id&quot;: &quot;22222222-2222-2222-2222-222222222222&quot;,
                &quot;limit&quot;: 0,
                &quot;messages&quot;: 1,
                &quot;name&quot;: &quot;domain.com&quot;,
                &quot;quarantined&quot;: 1,
                &quot;rateLimited&quot;: false,
                &quot;sender_emails&quot;: [
                    {
                        &quot;account_id&quot;: &quot;11111111-1111-1111-1111-11111111111&quot;,
                        &quot;domain_id&quot;: &quot;22222222-2222-2222-2222-222222222222&quot;,
                        &quot;exclusion&quot;: false,
                        &quot;id&quot;: &quot;33333333-3333-3333-3333-333333333333&quot;,
                        &quot;limit&quot;: 0,
                        &quot;messages&quot;: 1,
                        &quot;name&quot;: &quot;test@domain.com&quot;,
                        &quot;quarantined&quot;: 1,
                        &quot;rateLimited&quot;: false,
                        &quot;whitelisted&quot;: false
                    }
                ],
                &quot;whitelisted&quot;: false
            },
        ],
        &quot;exclusion&quot;: false,
        &quot;id&quot;: &quot;11111111-1111-1111-1111-11111111111&quot;,
        &quot;limit&quot;: 0,
        &quot;messages&quot;: 1,
        &quot;name&quot;: &quot;domain&quot;,
        &quot;quarantined&quot;: 1,
        &quot;rateLimited&quot;: false,
        &quot;scripts&quot;: null,
        &quot;whitelisted&quot;: false
    }
  ]
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="uninstallation" tabindex="-1"><a class="header-anchor" href="#uninstallation">#</a> Uninstallation</h3><p>To remove Imunify Email from your system, you need to disable the corresponding option in your CLN account. That will <strong>disable</strong> Imunify Email on the server, but rpm packages still will be presented. To remove them as well, execute the following command as root:</p><p><strong>Command</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>yum autoremove imunifyemail
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>This command ensures the removal of all associated components related to Imunify Email from your system.</p></div><div class="page-edit"><div class="edit-link"><img src="/global/pen.svg" alt="icon pen"><a href="https://github.com/cloudlinux/imunify360-documentation/tree/master/docs/email/README.md" target="_blank" rel="noopener noreferrer">Edit this page</a></div></div><div class="back-to-top" data-v-1eb13e00><a class="nav-arrow top back-to-top__link" data-v-1eb13e00><span class="back-to-top__link-span" data-v-1eb13e00>Scroll up</span></a></div><!--[--><!--]--></div><!----><div class="footer footer-default-layout" data-v-f2902e71><div class="footer__img" data-v-f2902e71><a href="https://cloudlinux.com" data-v-f2902e71><img src="/global/we-are-cloudlinux.svg" data-v-f2902e71></a></div><div class="footer-company-title" data-v-f2902e71>2025. CloudLinux Inc </div><div class="social" data-v-f2902e71><div class="social_links" data-v-f2902e71><!--[--><a href="https://cloudlinux.zendesk.com/hc/en-us/categories/360002375980-Imunify-Security-Products" target="_blank" data-v-f2902e71>Knowledge Base</a><a href="https://forum.cloudlinux.com/forum/imunify360" target="_blank" data-v-f2902e71>Forum</a><a href="https://blog.imunify360.com/" target="_blank" data-v-f2902e71>Blog</a><a href="https://www.cloudlinux.com/privacy-policy" target="_blank" data-v-f2902e71>Privacy Policy</a><!--]--></div><span class="footer-social-text" data-v-f2902e71>Stay in touch</span><div class="social-icons-wrapper" data-v-f2902e71><!--[--><a class="social-icons-link" href="https://www.facebook.com/imunify360/" target="_blank" data-v-f2902e71><img class="social-icons-link-img" src="/footer-social/fb.png" alt="footer logo" data-v-f2902e71></a><a class="social-icons-link" href="https://twitter.com/imunify360/" target="_blank" data-v-f2902e71><img class="social-icons-link-img" src="/footer-social/tw.png" alt="footer logo" data-v-f2902e71></a><a class="social-icons-link" href="https://linkedin.com/company/imunify360" target="_blank" data-v-f2902e71><img class="social-icons-link-img" src="/footer-social/in.png" alt="footer logo" data-v-f2902e71></a><a class="social-icons-link" href="https://www.youtube.com/channel/UCcW6dDJjcy41c7Hl_5LdLZQ" target="_blank" data-v-f2902e71><img class="social-icons-link-img" src="/footer-social/ytube.png" alt="footer logo" data-v-f2902e71></a><!--]--></div></div></div></div><!----><!--]--></div>
    <script type="module" src="/assets/app-99b8f3f9.js" defer></script>
  </body>
</html>
