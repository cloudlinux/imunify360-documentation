<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.61">
    <script type="text/javascript" charset="UTF-8" src="//cdn.cookie-script.com/s/c9f81de32507a4fec1eb03ee80d0f0ed.js"></script><script type="text/javascript" id="hs-script-loader" async defer src="//js.hs-scripts.com/5408110.js"></script><script>
            (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
            })(window,document,'script','dataLayer','GTM-5MC2SNS');
            </script><script>
              (function() {
                // Trigger the scroll event without actually scrolling
                function triggerScrollEvent() {
                  const targetElement = window;
                  const scrollEvent = new Event('scroll', {
                    bubbles: true,
                    cancelable: true,
                  });
                  targetElement.dispatchEvent(scrollEvent);
                }
        
                // Call the triggerScrollEvent and scrollBodyDown functions after the page is fully loaded
                window.addEventListener('load', () => {
                  triggerScrollEvent();
                });
              })();
            </script><title>Agent (patchman-client)</title><meta name="description" content="">
    <link rel="preload" href="/assets/style-e2ab0d9e.css" as="style"><link rel="stylesheet" href="/assets/style-e2ab0d9e.css">
    <link rel="modulepreload" href="/assets/app-a0d5a803.js"><link rel="modulepreload" href="/assets/framework-b2a7d84a.js"><link rel="modulepreload" href="/assets/index.html-f0ee0fda.js"><link rel="modulepreload" href="/assets/Max_filesize-e3c6efcb.js"><link rel="modulepreload" href="/assets/index.html-23985833.js"><link rel="prefetch" href="/assets/index.html-e8171bcc.js" as="script"><link rel="prefetch" href="/assets/index.html-f1592cd8.js" as="script"><link rel="prefetch" href="/assets/index.html-12b5593b.js" as="script"><link rel="prefetch" href="/assets/index.html-dec3e580.js" as="script"><link rel="prefetch" href="/assets/index.html-af3b614e.js" as="script"><link rel="prefetch" href="/assets/index.html-78e35fde.js" as="script"><link rel="prefetch" href="/assets/index.html-5401e2e3.js" as="script"><link rel="prefetch" href="/assets/index.html-72f1f47d.js" as="script"><link rel="prefetch" href="/assets/index.html-9a8a5969.js" as="script"><link rel="prefetch" href="/assets/index.html-12858481.js" as="script"><link rel="prefetch" href="/assets/index.html-f68e506b.js" as="script"><link rel="prefetch" href="/assets/index.html-21267412.js" as="script"><link rel="prefetch" href="/assets/index.html-4acf38da.js" as="script"><link rel="prefetch" href="/assets/index.html-f28801e4.js" as="script"><link rel="prefetch" href="/assets/index.html-d286dbf1.js" as="script"><link rel="prefetch" href="/assets/index.html-22cab04e.js" as="script"><link rel="prefetch" href="/assets/index.html-b8233d3a.js" as="script"><link rel="prefetch" href="/assets/index.html-31beec6a.js" as="script"><link rel="prefetch" href="/assets/index.html-1ee5676e.js" as="script"><link rel="prefetch" href="/assets/index.html-f83fc907.js" as="script"><link rel="prefetch" href="/assets/index.html-ebfc3abb.js" as="script"><link rel="prefetch" href="/assets/whmcs_saved.html-e44574f5.js" as="script"><link rel="prefetch" href="/assets/index.html-7e64b6d9.js" as="script"><link rel="prefetch" href="/assets/index.html-c201377f.js" as="script"><link rel="prefetch" href="/assets/index.html-3ec87d31.js" as="script"><link rel="prefetch" href="/assets/index.html-87f416f5.js" as="script"><link rel="prefetch" href="/assets/index.html-5c908c82.js" as="script"><link rel="prefetch" href="/assets/index.html-6d1480c5.js" as="script"><link rel="prefetch" href="/assets/index.html-1fc8e0bd.js" as="script"><link rel="prefetch" href="/assets/index.html-ae635b75.js" as="script"><link rel="prefetch" href="/assets/index.html-7f5598c8.js" as="script"><link rel="prefetch" href="/assets/index.html-233045da.js" as="script"><link rel="prefetch" href="/assets/index.html-fe10d519.js" as="script"><link rel="prefetch" href="/assets/index.html-95490bb8.js" as="script"><link rel="prefetch" href="/assets/404.html-e0575d4e.js" as="script"><link rel="prefetch" href="/assets/index.html-8e01dda3.js" as="script"><link rel="prefetch" href="/assets/index.html-d8cc55e1.js" as="script"><link rel="prefetch" href="/assets/index.html-a6ee47b1.js" as="script"><link rel="prefetch" href="/assets/index.html-3fdc86ad.js" as="script"><link rel="prefetch" href="/assets/index.html-897673ba.js" as="script"><link rel="prefetch" href="/assets/index.html-4d5a72cb.js" as="script"><link rel="prefetch" href="/assets/index.html-5fe9f5e4.js" as="script"><link rel="prefetch" href="/assets/index.html-51e61dc3.js" as="script"><link rel="prefetch" href="/assets/index.html-63710634.js" as="script"><link rel="prefetch" href="/assets/index.html-a37b72d0.js" as="script"><link rel="prefetch" href="/assets/index.html-2edb0b73.js" as="script"><link rel="prefetch" href="/assets/index.html-c136c722.js" as="script"><link rel="prefetch" href="/assets/index.html-9376b346.js" as="script"><link rel="prefetch" href="/assets/index.html-c8249acd.js" as="script"><link rel="prefetch" href="/assets/index.html-8c59a600.js" as="script"><link rel="prefetch" href="/assets/index.html-02af9b11.js" as="script"><link rel="prefetch" href="/assets/index.html-a03c604f.js" as="script"><link rel="prefetch" href="/assets/index.html-6b58b1ab.js" as="script"><link rel="prefetch" href="/assets/index.html-6f80e031.js" as="script"><link rel="prefetch" href="/assets/index.html-542c1159.js" as="script"><link rel="prefetch" href="/assets/index.html-ed3269cb.js" as="script"><link rel="prefetch" href="/assets/whmcs_saved.html-6afc919c.js" as="script"><link rel="prefetch" href="/assets/index.html-e2790a06.js" as="script"><link rel="prefetch" href="/assets/index.html-95f9ea2d.js" as="script"><link rel="prefetch" href="/assets/index.html-8cea790c.js" as="script"><link rel="prefetch" href="/assets/index.html-eaf5ea72.js" as="script"><link rel="prefetch" href="/assets/index.html-51f1d214.js" as="script"><link rel="prefetch" href="/assets/index.html-9dbafdf1.js" as="script"><link rel="prefetch" href="/assets/index.html-88ca16de.js" as="script"><link rel="prefetch" href="/assets/index.html-9de1bc13.js" as="script"><link rel="prefetch" href="/assets/index.html-29c050d9.js" as="script"><link rel="prefetch" href="/assets/index.html-8c1a380c.js" as="script"><link rel="prefetch" href="/assets/index.html-0a6ffcd2.js" as="script"><link rel="prefetch" href="/assets/index.html-cfd5f18d.js" as="script"><link rel="prefetch" href="/assets/404.html-13583a87.js" as="script"><link rel="prefetch" href="/assets/docsearch.min-1cf7bce8.js" as="script"><link rel="prefetch" href="/assets/docsearch.min-49eb4b49.js" as="script"><link rel="prefetch" href="/assets/vue-bot-ui.common-530731da.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><header class="navbar fixed"><div class="navbar-header"><div class="navbar-header__logo-wrapper"><a href="/" class="home-link"><img class="logo" src="/global/logo.svg" alt="logo header"></a><div class="header-layout__search-container header-mobile__hidden"><!----><form id="search-form" class="drawer-header__input"><input value="" id="algolia-search-input" placeholder="Search" class="header-layout__search-default"><div class="header-layout__search-icon-default"><img alt="search icon" src="/global/search.svg"></div></form><div><div class="drawer"><div class="drawer-header"><div class="drawer-header__wrapper"><h2 class="drawer-header__paragraph">How can we help you?</h2><div id="drawerSearch"></div></div><div class="drawer-cross"><img class="drawer-cross__img" src="/global/cross.svg" alt="cross"><p class="drawer-cross__text">close</p></div></div><div class="drawer-tabs__wrapper" data-v-c60e280a><!--[--><!--]--></div><main><div class="drawer-main"><div class="drawer-main__wrapper"><div class="drawer-main__breadcrumb"><!----></div><!--[--><!----><div style="--18dc7fb0:15;"><p class="no_results">What are you searching for?</p></div><!--]--></div></div><!----></main></div><!----></div></div></div><div class="links" style="max-width:nullpx;"><img class="navbar-header__mobile-search" src="/global/search.svg" alt="icon image"><div class="header-products-wrapper"><div class="dropdown"><!----><!----><div class="header-products-container"><img class="header-products-container__img" alt="hamburger menu" src="/global/hamburger-menu.svg"><p class="header-products-wrapper-paragraph">Products</p><img class="products-icon__default" width="10" height="8" src="/arrows/arrow-down.svg" alt="arrow down icon"></div></div></div><!--[--><a target="_blank" class="btn">Ask GPT?</a><a href="https://www.imunify360.com/support-portal/" target="_blank" class="btn">Submit support request</a><a href="https://trial4.imunify360.com/" target="_blank" class="btn btn-white">Try Free</a><!--]--></div></div><!----></header><!----><div class="page"><!--[--><!--]--><div class="breadcrumb-wrapper page-breadcrumb" data-v-9445381a><span class="breadcrumb-title" data-v-9445381a>Documentation:</span><!--[--><a aria-current="page" href="/patchman/agent/" class="router-link-active router-link-exact-active breadcrumb" data-v-9445381a>Agent (patchman-client)</a><!--]--></div><img class="page-mobile__sidebar-menu" src="/global/sidebar-menu.svg" alt="sidebar hamburger menu"><div class="page-nav-wrapper"><!----></div><div class="content" custom="false"><h1 id="agent-patchman-client" tabindex="-1"><a class="header-anchor" href="#agent-patchman-client" aria-hidden="true">#</a> Agent (patchman-client)</h1><nav class="table-of-contents"><ul><li><a aria-current="page" href="/patchman/agent/#where-can-i-find-the-software-changelog" class="router-link-active router-link-exact-active">Where can I find the software changelog?</a><ul><li><a aria-current="page" href="/patchman/agent/#online-changelog" class="router-link-active router-link-exact-active">Online changelog</a></li><li><a aria-current="page" href="/patchman/agent/#centos-cloudlinux" class="router-link-active router-link-exact-active">CentOS / CloudLinux</a></li><li><a aria-current="page" href="/patchman/agent/#debian-ubuntu" class="router-link-active router-link-exact-active">Debian / Ubuntu</a></li></ul></li><li><a aria-current="page" href="/patchman/agent/#tuning-the-patchman-agent" class="router-link-active router-link-exact-active">Tuning the Patchman agent</a><ul><li><a aria-current="page" href="/patchman/agent/#scanning-limits" class="router-link-active router-link-exact-active">Scanning limits</a></li><li><a aria-current="page" href="/patchman/agent/#scanning-interval" class="router-link-active router-link-exact-active">Scanning interval</a></li><li><a aria-current="page" href="/patchman/agent/#maximum-file-size" class="router-link-active router-link-exact-active">Maximum file size</a></li><li><a aria-current="page" href="/patchman/agent/#cpu-nice-value-and-i-o-priority" class="router-link-active router-link-exact-active">CPU Nice value and I/O Priority</a></li><li><a aria-current="page" href="/patchman/agent/#multi-threaded-scanning-configuration" class="router-link-active router-link-exact-active">Multi-threaded scanning configuration</a></li><li><a aria-current="page" href="/patchman/agent/#what-is-multithreaded-scanning" class="router-link-active router-link-exact-active">What is multithreaded scanning?</a></li><li><a aria-current="page" href="/patchman/agent/#how-does-multithreaded-scanning-benefit-me" class="router-link-active router-link-exact-active">How does multithreaded scanning benefit me?</a></li><li><a aria-current="page" href="/patchman/agent/#where-do-i-configure-multithreaded-scanning" class="router-link-active router-link-exact-active">Where do I configure multithreaded scanning?</a></li><li><a aria-current="page" href="/patchman/agent/#what-can-i-configure-and-what-do-the-settings-mean" class="router-link-active router-link-exact-active">What can I configure, and what do the settings mean?</a></li><li><a aria-current="page" href="/patchman/agent/#defaults-upon-release-and-after" class="router-link-active router-link-exact-active">Defaults, upon release and after</a></li></ul></li><li><a aria-current="page" href="/patchman/agent/#how-do-automatic-agent-updates-work" class="router-link-active router-link-exact-active">How do automatic agent updates work?</a><ul><li><a aria-current="page" href="/patchman/agent/#configuring-automatic-updates" class="router-link-active router-link-exact-active">Configuring automatic updates</a></li><li><a aria-current="page" href="/patchman/agent/#under-the-hood-steps-in-automatic-updating" class="router-link-active router-link-exact-active">Under the hood: steps in automatic updating</a></li></ul></li><li><a aria-current="page" href="/patchman/agent/#updating-the-patchman-agent" class="router-link-active router-link-exact-active">Updating the Patchman agent</a></li><li><a aria-current="page" href="/patchman/agent/#uninstalling-the-patchman-agent" class="router-link-active router-link-exact-active">Uninstalling the Patchman agent</a><ul><li><a aria-current="page" href="/patchman/agent/#centos-cloudlinux-2" class="router-link-active router-link-exact-active">CentOS / CloudLinux</a></li><li><a aria-current="page" href="/patchman/agent/#debian-ubuntu-2" class="router-link-active router-link-exact-active">Debian / Ubuntu</a></li><li><a aria-current="page" href="/patchman/agent/#cancelling-the-server-license" class="router-link-active router-link-exact-active">Cancelling the server license</a></li></ul></li></ul></nav><h2 id="where-can-i-find-the-software-changelog" tabindex="-1"><a class="header-anchor" href="#where-can-i-find-the-software-changelog" aria-hidden="true">#</a> Where can I find the software changelog?</h2><h3 id="online-changelog" tabindex="-1"><a class="header-anchor" href="#online-changelog" aria-hidden="true">#</a> Online changelog</h3><p>You can find the central Patchman software changelog at the following URL:</p><p><a href="https://download.patchman.co/changelog" target="_blank" rel="noopener noreferrer">https://download.patchman.co/changelog</a></p><p>In addition to the above, the changelog for each software update is also available through your system package manager.</p><h3 id="centos-cloudlinux" tabindex="-1"><a class="header-anchor" href="#centos-cloudlinux" aria-hidden="true">#</a> CentOS / CloudLinux</h3><p>Use the RPM package management utility with the following command:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>rpm -q --changelog patchman-client
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="debian-ubuntu" tabindex="-1"><a class="header-anchor" href="#debian-ubuntu" aria-hidden="true">#</a> Debian / Ubuntu</h3><p>The apt package manager installs the changelog in a fixed location. You can read the changelog in this location with the following command:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>zcat /usr/share/doc/patchman-client/changelog.Debian.gz
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><hr><h2 id="tuning-the-patchman-agent" tabindex="-1"><a class="header-anchor" href="#tuning-the-patchman-agent" aria-hidden="true">#</a> Tuning the Patchman agent</h2><p>The Patchman agent process allows for multiple tuning options. This article serves as a collection of available tuning methods and where to find them.</p><h3 id="scanning-limits" tabindex="-1"><a class="header-anchor" href="#scanning-limits" aria-hidden="true">#</a> Scanning limits</h3><p>Scanning limits allow you to set restrictions on full server scans. Setting an option will apply the scanning limit after a certain event is triggered. Disabling the scanning limit will make sure that the limit will not be applied. Scanning limits can be disabled for manual server scans triggered through the Portal. Scanning limits will only apply to full server scans and therefore will not affect manual end user scans.</p><p>You can configure this on the server group (<a href="https://portal.patchman.co/servers/group/" target="_blank" rel="noopener noreferrer">https://portal.patchman.co/servers/group/</a>)</p><p>The following limits and triggers can be configured:</p><ul><li>Throttle dynamic malware scanning by only scanning changed files</li><li>Disable dynamic malware scanning altogether</li><li>Abort all scanning</li></ul><p>The following triggers can be configured:</p><ul><li>Disabled</li><li>After scanning N users</li><li>After scanning N directories</li><li>After scanning one in N users</li><li>After scanning one in N directories</li><li>After scanning for N hours total (since the beginning of the server-wide scan)</li><li>After surpassing the time of day</li></ul><h3 id="scanning-interval" tabindex="-1"><a class="header-anchor" href="#scanning-interval" aria-hidden="true">#</a> Scanning interval</h3><p>Scanning interval enables you to choose to run Dynamic malware scanning not on every scan, but only on certain intervals, for instance, on certain days of the week.</p><p>You can configure this on the server group (<a href="https://portal.patchman.co/servers/group/" target="_blank" rel="noopener noreferrer">https://portal.patchman.co/servers/group/</a>)</p><p>The following options can be configured:</p><ul><li>During every scan, scan every file dynamically</li><li>During every scan, scan files that have changed since the last dynamic scan</li><li>Only when the scan is in the configurable interval, scan every file dynamically</li><li>Scan every file dynamically when the scan is in the configurable interval, during all other scans only scan changed files dynamically</li><li>Never perform dynamic scanning</li></ul><p>Further reading:<br> More information about configuring scanning limits and interval can be found in the main Patchman CLEAN article, here: <a href="/patchman/frequently_asked_questions/#what-is-patchman-clean-and-how-do-i-enable-configure-it" class="">What is Patchman CLEAN, and how do I enable &amp; configure it?</a></p><h3 id="maximum-file-size" tabindex="-1"><a class="header-anchor" href="#maximum-file-size" aria-hidden="true">#</a> Maximum file size</h3><p>Additionally, scanning limits offer a maximum file size setting, allowing you do determine the cut-off for scanning large files:</p><p><img src="/images/Max_filesize.png" alt=""></p><h3 id="cpu-nice-value-and-i-o-priority" tabindex="-1"><a class="header-anchor" href="#cpu-nice-value-and-i-o-priority" aria-hidden="true">#</a> CPU Nice value and I/O Priority</h3><p>The agent also allows you to configure CPU and IO resource priorities, through nice values for CPU, and Best effort priority for CFQ I/O scheduling</p><p>You can configure this on the server group (<a href="https://portal.patchman.co/servers/group/" target="_blank" rel="noopener noreferrer">https://portal.patchman.co/servers/group/</a>)</p><p><img src="/images/niceio-priority.png" alt=""></p><h3 id="multi-threaded-scanning-configuration" tabindex="-1"><a class="header-anchor" href="#multi-threaded-scanning-configuration" aria-hidden="true">#</a> Multi-threaded scanning configuration</h3><p>With the introduction of multithreading, multithreading settings can be configured for the agent. You can configure this on the server group (<a href="https://portal.patchman.co/servers/group/" target="_blank" rel="noopener noreferrer">https://portal.patchman.co/servers/group/</a>). The following settings can be configured:</p><p><strong>Absolute (thread count)</strong><br> Configure the exact number of threads to use for multithreaded scanning.</p><p><strong>CPU Ratio</strong><br> Allocate a percentage of total available CPU threads to use for multi-threaded scanning. As this is a percentage, it is worth noting that it <strong>rounds down</strong>, to whole threads.</p><p><strong>CPU Reservation</strong><br> Allocate the number of CPU threads for the Patchman daemon to leave unused. Note that there is a <strong>minimum thread allocation of 1</strong>. If a user configures a lower limit, for example 0, or -4 (an 8 thread reservation on a 4 core machine), the Patchman agent logs at <code>info</code> level and instead uses 1 thread.</p><h3 id="what-is-multithreaded-scanning" tabindex="-1"><a class="header-anchor" href="#what-is-multithreaded-scanning" aria-hidden="true">#</a> What is multithreaded scanning?</h3><p>While older versions were entirely single-threaded, version 1.12.0-1 introduces multi-threaded scanning to the Patchman agent.</p><p>Multithreaded scanning enables the Patchman agent process (patchmand) to create multiple worker threads, allowing it to perform multiple tasks concurrently. This allows the agent to better scale performance with the resources available (and allocated) on a hosting platform, and perform far better on tasks that are (mostly) CPU-bound.</p><h3 id="how-does-multithreaded-scanning-benefit-me" tabindex="-1"><a class="header-anchor" href="#how-does-multithreaded-scanning-benefit-me" aria-hidden="true">#</a> How does multithreaded scanning benefit me?</h3><p>While multithreading does affect most tasks performed by the agent, the most drastic benefit is seen with the use of <a href="/patchman/frequently_asked_questions/#what-is-patchman-clean-and-how-do-i-enable-configure-it" class="">Patchman CLEAN</a>&#39;s rule-scanning mechanism. Where before customers who used Patchman CLEAN could see longer scanning times depending on the size and density of their platform (and would likely have configured scanning limits to mitigate them), the introduction of multithreading—if employed and configured properly—will drastically improve scan times, allowing users to be far less restrictive in scanning configuration. This, in turn, greatly benefits the effective coverage of the CLEAN solution.</p><h3 id="where-do-i-configure-multithreaded-scanning" tabindex="-1"><a class="header-anchor" href="#where-do-i-configure-multithreaded-scanning" aria-hidden="true">#</a> Where do I configure multithreaded scanning?</h3><p>You can configure the agent&#39;s multithreaded scanning settings on the server group (once logged in; <a href="https://portal.patchman.co/servers/group/" target="_blank" rel="noopener noreferrer">https://portal.patchman.co/servers/group/</a>) which allows you to easily manage it across multiple servers.</p><h3 id="what-can-i-configure-and-what-do-the-settings-mean" tabindex="-1"><a class="header-anchor" href="#what-can-i-configure-and-what-do-the-settings-mean" aria-hidden="true">#</a> What can I configure, and what do the settings mean?</h3><p>With the introduction of multithreading, the following settings can be configured for the agent:</p><h4 id="absolute-thread-count" tabindex="-1"><a class="header-anchor" href="#absolute-thread-count" aria-hidden="true">#</a> Absolute (thread count)</h4><p>Configure the exact number of threads to use for multithreaded scanning.</p><h4 id="cpu-ratio" tabindex="-1"><a class="header-anchor" href="#cpu-ratio" aria-hidden="true">#</a> CPU Ratio</h4><p>Allocate a percentage of total available CPU threads to use for multi-threaded scanning. As this is a percentage, it is worth noting that it <strong>rounds down</strong>, to whole threads.</p><h4 id="cpu-reservation" tabindex="-1"><a class="header-anchor" href="#cpu-reservation" aria-hidden="true">#</a> CPU Reservation</h4><p>Allocate the number of CPU threads for the Patchman daemon to leave unused. Note that there is a <strong>minimum thread allocation of 1</strong>. If a user configures a lower limit, for example 0, or -4 (an 8 thread reservation on a 4 core machine), the Patchman agent logs at <code>info</code> level and instead uses 1 thread.</p><h3 id="defaults-upon-release-and-after" tabindex="-1"><a class="header-anchor" href="#defaults-upon-release-and-after" aria-hidden="true">#</a> Defaults, upon release and after</h3><p>Upon release of the multithreading feature, the &#39;Absolute&#39; setting will be used as the default for all existing customers&#39; server groups, and set to 1 core, meaning that for existing users, agent behaviour is unchanged until they explicitly increase the thread count. For <em>new</em> server groups created after the feature is live, a sensible default is chosen that does allow users to benefit from multithreading out of the box; CPU Ratio, set to 50%.</p><hr><h2 id="how-do-automatic-agent-updates-work" tabindex="-1"><a class="header-anchor" href="#how-do-automatic-agent-updates-work" aria-hidden="true">#</a> How do automatic agent updates work?</h2><div class="tip custom-block"><p class="custom-block-title"></p><p>If you have installed the package for <a href="/patchman/frequently_asked_questions/#real-time-scanning-what-is-it-and-how-do-i-configure-it" class="">real-time scanning</a>, automatic updates will also apply to that package. If you don’t have it installed yet, you need to manually install it first - Patchman can’t automatically perform this installation for you, for security reasons.</p></div><p>The Patchman agent is capable of performing unattended automated updates. This saves you time and effort whenever we release a new version, and ensures that all your servers are always running the latest version with both the newest features and the latest bugfixes.</p><h3 id="configuring-automatic-updates" tabindex="-1"><a class="header-anchor" href="#configuring-automatic-updates" aria-hidden="true">#</a> Configuring automatic updates</h3><h4 id="disabling-automatic-updates" tabindex="-1"><a class="header-anchor" href="#disabling-automatic-updates" aria-hidden="true">#</a> Disabling automatic updates</h4><p>Automatic updates are switched on by default, and are available for agents with version 1.7.0-1 and higher.</p><p>If you do not wish to benefit from automatic updates, you can opt out through an option in the Portal. The option for controlling the automatic updates can be configured per server group. To disable automatic updates for a server group, navigate to &quot;Server &gt; Server groups&quot;, and then select the relevant server group in the list. Scroll down to &quot;Miscellaneous settings&quot; and deselect &quot;Automatic updates&quot;.</p><p><img src="/images/auto-update.png" alt=""></p><h4 id="repository-name-modifications" tabindex="-1"><a class="header-anchor" href="#repository-name-modifications" aria-hidden="true">#</a> Repository name modifications</h4><p>By default we assume the repository is named &quot;patchman&quot;, as will be the case if you use our installation script to install the repository on your system. If you decided to rename the repository definition, you can configure the alternative repository name by adding the following data to the file /etc/patchman/patchman.ini (create it if it does not yet exist):</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>[updates]
repository = patchman
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>Naturally, replace &quot;patchman&quot; with the appropriate value. Make sure to reload the daemon after modifying the file:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>service patchman reload
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Our update process will use the new repository name where appropriate.</p><h3 id="under-the-hood-steps-in-automatic-updating" tabindex="-1"><a class="header-anchor" href="#under-the-hood-steps-in-automatic-updating" aria-hidden="true">#</a> Under the hood: steps in automatic updating</h3><p>As a system administrator you may want to know how the updates are performed. In particular, you may be interested to know what checks we perform to ensure successful updates, what rollback procedures are involved if an update fails, and how the validity of each update is verified. This section lists all the steps the agent takes including some background information regarding the how and why for each step.</p><p>When building the updating procedure, our goal was to simulate the steps and checks involved in any manual update, and you&#39;ll notice that we&#39;re closely following the steps you might take if you manually performed an update of our software on your system. In particular, we made sure that we relied on the system package managers as much as possible (since that is what these systems were built for) which means we can delegate package signature validation and repository downloading to those proven tools. Additionally, we picked the steps involved in such a way that it will never update anything other than the patchman-client and patchman-client-realtime package, even if an update dependency requires it. If we ever update our dependencies, we will require a manual (attended) upgrade from you. All of this is done to ensure we don&#39;t modify anything on your systems that is not strictly required for purely updating our own software.</p><div class="tip custom-block"><p class="custom-block-title"></p><p>In the steps below, wherever actions are performed for the patchman-client package, they are repeated for the patchman-client-realtime package if (and only if) you have that installed.</p></div><h4 id="centos-cloudlinux-1" tabindex="-1"><a class="header-anchor" href="#centos-cloudlinux-1" aria-hidden="true">#</a> CentOS/CloudLinux</h4><ol><li>Clean the cached metadata for the patchman repository to ensure issuing an install command will result in new metadata being downloaded from our repository <ol><li>On CentOS 6 and 7:<div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>yum clean all --disablerepo=&quot;*&quot; --enablerepo=&quot;patchman&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li>On CentOS 8:<div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>dnf clean all --disablerepo=&quot;*&quot; --enablerepo=&quot;patchman&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ol></li><li>Download the most recent version of the patchman-client package into the cache directory (and parse the associated filename). If no new version is available, stop the update procedure. <ol><li>On CentOS 6 and 7:<div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>yum install -y --downloadonly --downloaddir=&lt;patchman tmp dir&gt; patchman-client
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li>On CentOS 8<div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>dnf install -y --downloadonly --downloaddir=&lt;patchman tmp dir&gt; --verbose patchman-client
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ol></li><li>Determine the filename of the downloaded package using the filename from step 2.</li><li>Install the downloaded package using rpm. Since rpm is not able to download any potentially missing dependencies, this step will automatically fail if any unforeseen dependency problems arise.<div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>rpm -U /&lt;patchman tmp dir&gt;/patchman-client-1.2.3-1.rpm
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li>Parse the output from the rpm command to check whether the update succeeded.</li><li>If the update is successful, the agent will restart itself after completion of the update procedure, ensuring the server is running the newly installed version afterwards.</li></ol><h4 id="debian-ubuntu-1" tabindex="-1"><a class="header-anchor" href="#debian-ubuntu-1" aria-hidden="true">#</a> Debian/Ubuntu</h4><ol><li>Read the filename that contains our repository definition and the path to the cache directory. This means parsing Dir, Dir::Etc, Dir::Etc::sourceparts, Dir::Cache and Dir::Cache::archives from:<div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>apt-config dump
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li>Update the cached metadata for only the patchman repository. This is done by telling apt to perform the update while thinking our repository is the only repository definition.<div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>apt-get update -o Dir::Etc::sourcelist=&quot;/etc/apt/sources.list.d/patchman.repo&quot; -o Dir::Etc::sourceparts=&quot;-&quot; -o APT::Get::List-Cleanup=&quot;0&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li>Check whether a new update for patchman-client is available by parsing the output from:<div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>apt-cache policy patchman-client
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li>If a new update is available, download it (and parse the associated filename).<div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>apt-get -d install patchman-client
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li>Determine the filename of the downloaded package using the cache directory and the filename from step 4.</li><li>Install the downloaded package using dpkg. Since dpkg is not able to download any potentially missing dependencies, this step will automatically fail if any unforeseen dependency problems arise.<div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>dpkg -i /var/cache/apt/archives/patchman-client_1.2.3-1.deb
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li>Parse the output from the dpkg command to check whether the update succeeded.</li><li>If the update is successful, the agent will restart itself after completion of the update procedure, ensuring the server is running the newly installed version afterwards.</li></ol><div class="tip custom-block"><p class="custom-block-title"></p><p>In step 3, we used <code>apt-cache madison patchman-client</code> until version 1.14.0-1.</p></div><hr><h2 id="updating-the-patchman-agent" tabindex="-1"><a class="header-anchor" href="#updating-the-patchman-agent" aria-hidden="true">#</a> Updating the Patchman agent</h2><div class="tip custom-block"><p class="custom-block-title"></p><p>We strongly suggest using the auto-update feature, as described in <a href="https://patchman.atlassian.net/wiki/spaces/PT/pages/113410280" target="_blank" rel="noopener noreferrer">this article</a>. Relying on auto-update decreases maintenance and ensures you will always automatically use the most up-to-date version of the Patchman software.</p></div><p>The Patchman agent, running on the servers you add to the Portal, is updated regularly to resolve bugs and introduce new features. Updating the Patchman agent only requires you to update the package using your package manager.</p><p>We recommend adding the updating of the Patchman agent to your regular update schedule. However, if you need to manually update the agent, you can use the following commands:</p><p>If you are using CentOS, you can use:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>yum update patchman-client
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>or</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>dnf update patchman-client
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>If you are using Debian or Ubuntu, you can use:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>apt-get update
apt-get install patchman-client
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>After updating the agent, the service should restart automatically and you should see the new version number appear in the Portal (under Servers).</p><p>On rare occasions customers reported that the agent refuses to stop, in that case a manual restart is required.</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>service patchman restart
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>If the restart fails, there is probably a long-running task that prevents the agent from restarting immediately. The logfiles in /var/log/patchman/ will point out that the shutdown signal was received by the process, and will be processed as soon as possible. If the process hasn&#39;t restarted after 10 minutes, please contact <a href="mailto:support@patchman.co">support@patchman.co</a> and send along the logfiles for further inspection.</p><p>Although we strive to maximize compatibility, we may occassionally drop support for outdated agent versions. Your agent will then not be able to connect to the Portal, meaning that new detections will not be reported and existing detections can&#39;t be resolved.</p><hr><h2 id="uninstalling-the-patchman-agent" tabindex="-1"><a class="header-anchor" href="#uninstalling-the-patchman-agent" aria-hidden="true">#</a> Uninstalling the Patchman agent</h2><p>Patchman is installed on your system using the standard package manager. This means that you can easily uninstall the software using this package manager.</p><h3 id="centos-cloudlinux-2" tabindex="-1"><a class="header-anchor" href="#centos-cloudlinux-2" aria-hidden="true">#</a> CentOS / CloudLinux</h3><p>Use the yum package management utility with the following command:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>yum remove patchman-client
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>or</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>dnf remove patchman-client
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="debian-ubuntu-2" tabindex="-1"><a class="header-anchor" href="#debian-ubuntu-2" aria-hidden="true">#</a> Debian / Ubuntu</h3><p>Use the apt package management utility with the following command:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>apt-get remove patchman-client
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="cancelling-the-server-license" tabindex="-1"><a class="header-anchor" href="#cancelling-the-server-license" aria-hidden="true">#</a> Cancelling the server license</h3><p>Make sure to cancel the server license in the Patchman Portal. We strongly suggest you do this <strong><em>after</em></strong> the removal of the software from your system, because if the software is still running it may automatically request a new license on your account (according to the standard installation procedure).</p><p>In the Patchman Portal, go to the server configuration page under Servers. If your plan requires advance notice for cancelling servers, click the red Cancel button to cancel your license and deactivate it per the renewal date. Otherwise, click the red Delete button to immediately remove the server license from your account. This will make sure you are no longer billed for this server.</p></div><div class="page-edit"><div class="edit-link"><img src="/global/pen.svg" alt="icon pen"><a href="https://github.com/cloudlinux/imunify360-documentation/tree/master/docs/patchman/agent/README.md" target="_blank" rel="noopener noreferrer">Edit this page</a></div></div><div class="back-to-top" data-v-1eb13e00><a class="nav-arrow top back-to-top__link" data-v-1eb13e00><span class="back-to-top__link-span" data-v-1eb13e00>Scroll up</span></a></div><!--[--><!--]--></div><!----><div class="footer footer-default-layout" data-v-f2902e71><div class="footer__img" data-v-f2902e71><a href="https://cloudlinux.com" data-v-f2902e71><img src="/global/we-are-cloudlinux.svg" data-v-f2902e71></a></div><div class="footer-company-title" data-v-f2902e71>2024. CloudLinux Inc </div><div class="social" data-v-f2902e71><div class="social_links" data-v-f2902e71><!--[--><a href="https://cloudlinux.zendesk.com/hc/en-us/categories/360002375980-Imunify-Security-Products" target="_blank" data-v-f2902e71>Knowledge Base</a><a href="https://forum.cloudlinux.com/forum/imunify360" target="_blank" data-v-f2902e71>Forum</a><a href="https://blog.imunify360.com/" target="_blank" data-v-f2902e71>Blog</a><a href="https://www.cloudlinux.com/privacy-policy" target="_blank" data-v-f2902e71>Privacy Policy</a><!--]--></div><span class="footer-social-text" data-v-f2902e71>Stay in touch</span><div class="social-icons-wrapper" data-v-f2902e71><!--[--><a class="social-icons-link" href="https://www.facebook.com/imunify360/" target="_blank" data-v-f2902e71><img class="social-icons-link-img" src="/footer-social/fb.png" alt="footer logo" data-v-f2902e71></a><a class="social-icons-link" href="https://twitter.com/imunify360/" target="_blank" data-v-f2902e71><img class="social-icons-link-img" src="/footer-social/tw.png" alt="footer logo" data-v-f2902e71></a><a class="social-icons-link" href="https://linkedin.com/company/imunify360" target="_blank" data-v-f2902e71><img class="social-icons-link-img" src="/footer-social/in.png" alt="footer logo" data-v-f2902e71></a><a class="social-icons-link" href="https://www.youtube.com/channel/UCcW6dDJjcy41c7Hl_5LdLZQ" target="_blank" data-v-f2902e71><img class="social-icons-link-img" src="/footer-social/ytube.png" alt="footer logo" data-v-f2902e71></a><!--]--></div></div></div></div><!----><!--]--></div>
    <script type="module" src="/assets/app-a0d5a803.js" defer></script>
  </body>
</html>
